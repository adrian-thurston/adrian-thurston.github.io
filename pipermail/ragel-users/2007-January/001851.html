<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Problematic machine specification
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:ragel-users%40colm.net?Subject=Re%3A%20Problematic%20machine%20specification&In-Reply-To=%3Cd56373190701011014m7ffdbf62y9bae19e72ddd7b62%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Problematic machine specification</H1>
    <B>Matt Mower</B> 
    <A HREF="mailto:ragel-users%40colm.net?Subject=Re%3A%20Problematic%20machine%20specification&In-Reply-To=%3Cd56373190701011014m7ffdbf62y9bae19e72ddd7b62%40mail.gmail.com%3E"
       TITLE="Problematic machine specification">matt.mo... at gmail.com
       </A><BR>
    <I>Mon Jan  1 18:14:41 UTC 2007</I>
    <P><UL>
        
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1851">[ date ]</a>
              <a href="thread.html#1851">[ thread ]</a>
              <a href="subject.html#1851">[ subject ]</a>
              <a href="author.html#1851">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi folks.

I'm writing an app that needs to parse the output from svn diff
although not to any great degree of detail. For various reasons (blame
Zed!) I decided to use this as an opportunity to learn Ragel.

With a lot of help from Zed I have something that seems close but
isn't quite working. The problem section revolves around the contents
of a diff hunk. This looks something like:

@@ -205,3 +205,15 @@
 .hugeTag {
  font-size: 125%;
 }
+
+.asp_timestamp_col {
...

the first three lines after the line beginning @@... have a space
prefix (meaning a line common to both files), the next line has a '+'
prefix (meaning a new line). A hunk ends when you reach a line that
doesn't begin with &quot; &quot;, &quot;+&quot;, or &quot;-&quot;.

The problem is that the machine recognizes the first three lines of my
example (prefixed &quot; &quot;) but comes back with an error when it reaches
the first line prefixed &quot;+&quot;. Looking at the diagram (diffBody.png
attached) for the diffBody machine it looks to me as if it should
correctly parse the example.

If anyone can help point out where I am going wrong that would be much
appreciated. I'm not sure if &amp; how I can get it to log the state or
character being processed when the error was raised. That too would be
useful.

My application is being written in Objective-C. So far as I can tell
that doesn't significantly muddy the waters and the O-C bits seem to
be working.

Many thanks,

Matt

-- 
Matt Mower :: <A HREF="http://matt.blogs.it/">http://matt.blogs.it/</A>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: DiffParser.m.rl
Type: application/octet-stream
Size: 2098 bytes
Desc: not available
URL: &lt;<A HREF="http://www.colm.net/pipermail/ragel-users/attachments/20070101/d7a8b028/attachment-0001.obj">http://www.colm.net/pipermail/ragel-users/attachments/20070101/d7a8b028/attachment-0001.obj</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: diffBody.png
Type: image/png
Size: 101358 bytes
Desc: not available
URL: &lt;<A HREF="http://www.colm.net/pipermail/ragel-users/attachments/20070101/d7a8b028/attachment-0001.png">http://www.colm.net/pipermail/ragel-users/attachments/20070101/d7a8b028/attachment-0001.png</A>&gt;
</PRE>
<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1851">[ date ]</a>
              <a href="thread.html#1851">[ thread ]</a>
              <a href="subject.html#1851">[ subject ]</a>
              <a href="author.html#1851">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.colm.net/cgi-bin/mailman/listinfo/ragel-users">More information about the ragel-users
mailing list</a><br>
</body></html>
