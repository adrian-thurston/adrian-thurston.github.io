<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Minimisation question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:ragel-users%40colm.net?Subject=Re%3A%20Minimisation%20question&In-Reply-To=%3C2d4d6bd0609141520v28509c22g4da49bc1d2ef5b50%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="001772.html">
   <LINK REL="Next"  HREF="001774.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Minimisation question</H1>
    <B>Colin Fleming</B> 
    <A HREF="mailto:ragel-users%40colm.net?Subject=Re%3A%20Minimisation%20question&In-Reply-To=%3C2d4d6bd0609141520v28509c22g4da49bc1d2ef5b50%40mail.gmail.com%3E"
       TITLE="Minimisation question">colin.flem... at coreproc.com
       </A><BR>
    <I>Thu Sep 14 22:20:30 UTC 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="001772.html">Minimisation question
</A></li>
        <LI>Next message: <A HREF="001774.html">Minimisation question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1773">[ date ]</a>
              <a href="thread.html#1773">[ thread ]</a>
              <a href="subject.html#1773">[ subject ]</a>
              <a href="author.html#1773">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Sure, I've factored out the common rules, so I've attached a tar with
the ASCII only and Unicode versions.

BTW I'd also be interested in any suggestions you can give me for
replacing part of the grammar. Obviously XML is context free, mostly
this is OK (I'm going to use the tag stack we discussed) but there's
one section which is still giving me a headache.

It was like this (line 73 in xmlcommon.rl) :

cp = (Name | choice | seq) ('?' | '*' | '+')?;

seq = '(' S? cp ( S? ',' S? cp )* S? ')';

choice = '(' S? cp ( S? '|' S? cp )* S? ')';

children = (choice | seq) ('?' | '*' | '+')?;

I've just put in a dirty hack for now that will hopefully at least lex
the construct more or less, but won't enforce any of the original
grammar constraints. Any suggestions about how to do this gracefully
would be great. I thought about using fcall but seq and choice are
ambiguous after the opening parenthesis. I also thought about using
the conditional trick in test/cond6.rl, but then it gets tricky making
sure that it enforces sequences of only alternations or only
concatenations (i.e. preventing ( a | b , c ). I really do need a
stack of which symbol is used at what indentation level I think, but
it's going to get a bit hairy.

Cheers,
Colin
-------------- next part --------------
A non-text attachment was scrubbed...
Name: xml.tar
Type: application/x-tar
Size: 20480 bytes
Desc: not available
URL: &lt;<A HREF="http://www.colm.net/pipermail/ragel-users/attachments/20060914/0f1380af/attachment-0001.tar">http://www.colm.net/pipermail/ragel-users/attachments/20060914/0f1380af/attachment-0001.tar</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001772.html">Minimisation question
</A></li>
	<LI>Next message: <A HREF="001774.html">Minimisation question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1773">[ date ]</a>
              <a href="thread.html#1773">[ thread ]</a>
              <a href="subject.html#1773">[ subject ]</a>
              <a href="author.html#1773">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.colm.net/cgi-bin/mailman/listinfo/ragel-users">More information about the ragel-users
mailing list</a><br>
</body></html>
