From thurston at colm.net  Mon Mar 20 04:21:21 2017
From: thurston at colm.net (Adrian Thurston)
Date: Mon, 20 Mar 2017 12:21:21 +0800
Subject: [ragel] [ragel-users] [bug][ragel 6.6]
Message-ID: <beea0e65b1134cf4d4cc9ada3b501917@mail.colm.net>

A longstanding bug has been fixed in ragel 6.X and 7.X.

http://www.colm.net/pipermail/ragel/2011-October/001449.html

Text of the original message to the old list:

source attached.

ragel -L -C -G2 -e -p  smtp.rl


----------------------
smtp.c:167:2: error: label ‘_again’ used but not defined
---------------------

$ ragel -v
Ragel State Machine Compiler version 6.6 Dec 2009
Copyright (c) 2001-2009 by Adrian Thurston
-------------------------------------

Also, -T0 compiles OK, but does not work as expected. How to debug ?
graphviz diagrams says that everything is fine.

-- 
Segmentation fault

-- 
Dr. Adrian D. Thurston
Chief Scientist
Colm Networks
http://colm.net/



From thurston at colm.net  Thu Mar 23 07:32:44 2017
From: thurston at colm.net (Adrian Thurston)
Date: Thu, 23 Mar 2017 15:32:44 +0800
Subject: [ragel] changes to Ragel in response to the CloudFlare incident
In-Reply-To: <8177177f1ec72a5309e7fb3df03ecc5f@mail.colm.net>
References: <8177177f1ec72a5309e7fb3df03ecc5f@mail.colm.net>
Message-ID: <1a3a8315e6650e309b5b8b8c593ab8dc@mail.colm.net>

This solution is now checked in on the ragel-6 branch and master.

What's different:

Before jumping back into the machine execution in an fgoto, fcall, or 
fret in an EOF action, a check of P vs PE is done. If P is still equal 
to PE then control moves to the EOF check instead of re-entering.

Any code that correctly issues an fhold should function the same.

Any code that does not modify P will behave as if fhold was issued.

-Adrian

On 2017-02-28 14:45, Adrian Thurston wrote:
> I've debated a few alternatives, but I believe the correct response is
> to perform an EOF check in the code generated by fgoto in actions that
> run at EOF time. Probably specialize the action to two distinct cases
> and not touch the on-char version.


From thurston at colm.net  Fri Mar 24 05:18:40 2017
From: thurston at colm.net (Adrian Thurston)
Date: Fri, 24 Mar 2017 13:18:40 +0800
Subject: [ragel] ragel 6.10 released today
Message-ID: <a86d1c890ffab5eec9c3660397100b2c@mail.colm.net>

Ragel 6.10 released today.

http://www.colm.net/files/ragel/ChangeLog

http://www.colm.net/files/ragel/ragel-6.10.tar.gz

-- 
Dr. Adrian D. Thurston
Chief Scientist
Colm Networks
http://colm.net/



From thurston at colm.net  Mon Mar 20 04:21:21 2017
From: thurston at colm.net (Adrian Thurston)
Date: Mon, 20 Mar 2017 12:21:21 +0800
Subject: [ragel] [ragel-users] [bug][ragel 6.6]
Message-ID: <beea0e65b1134cf4d4cc9ada3b501917@mail.colm.net>

A longstanding bug has been fixed in ragel 6.X and 7.X.

http://www.colm.net/pipermail/ragel/2011-October/001449.html

Text of the original message to the old list:

source attached.

ragel -L -C -G2 -e -p  smtp.rl


----------------------
smtp.c:167:2: error: label ‘_again’ used but not defined
---------------------

$ ragel -v
Ragel State Machine Compiler version 6.6 Dec 2009
Copyright (c) 2001-2009 by Adrian Thurston
-------------------------------------

Also, -T0 compiles OK, but does not work as expected. How to debug ?
graphviz diagrams says that everything is fine.

-- 
Segmentation fault

-- 
Dr. Adrian D. Thurston
Chief Scientist
Colm Networks
http://colm.net/




From thurston at colm.net  Thu Mar 23 07:32:44 2017
From: thurston at colm.net (Adrian Thurston)
Date: Thu, 23 Mar 2017 15:32:44 +0800
Subject: [ragel] changes to Ragel in response to the CloudFlare incident
In-Reply-To: <8177177f1ec72a5309e7fb3df03ecc5f@mail.colm.net>
References: <8177177f1ec72a5309e7fb3df03ecc5f@mail.colm.net>
Message-ID: <1a3a8315e6650e309b5b8b8c593ab8dc@mail.colm.net>

This solution is now checked in on the ragel-6 branch and master.

What's different:

Before jumping back into the machine execution in an fgoto, fcall, or 
fret in an EOF action, a check of P vs PE is done. If P is still equal 
to PE then control moves to the EOF check instead of re-entering.

Any code that correctly issues an fhold should function the same.

Any code that does not modify P will behave as if fhold was issued.

-Adrian

On 2017-02-28 14:45, Adrian Thurston wrote:
> I've debated a few alternatives, but I believe the correct response is
> to perform an EOF check in the code generated by fgoto in actions that
> run at EOF time. Probably specialize the action to two distinct cases
> and not touch the on-char version.



From thurston at colm.net  Fri Mar 24 05:18:40 2017
From: thurston at colm.net (Adrian Thurston)
Date: Fri, 24 Mar 2017 13:18:40 +0800
Subject: [ragel] ragel 6.10 released today
Message-ID: <a86d1c890ffab5eec9c3660397100b2c@mail.colm.net>

Ragel 6.10 released today.

http://www.colm.net/files/ragel/ChangeLog

http://www.colm.net/files/ragel/ragel-6.10.tar.gz

-- 
Dr. Adrian D. Thurston
Chief Scientist
Colm Networks
http://colm.net/




