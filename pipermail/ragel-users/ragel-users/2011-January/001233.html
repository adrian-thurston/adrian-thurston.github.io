<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ragel-users] EOF actions and buffering
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:ragel%40colm.net?Subject=Re%3A%20%5Bragel-users%5D%20EOF%20actions%20and%20buffering&In-Reply-To=%3CDD7FA35D-D1C6-4012-8164-0C5BE452B2D1%40bvanderveen.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="001231.html">
   <LINK REL="Next"  HREF="001234.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ragel-users] EOF actions and buffering</H1>
    <B>Benjamin van der Veen</B> 
    <A HREF="mailto:ragel%40colm.net?Subject=Re%3A%20%5Bragel-users%5D%20EOF%20actions%20and%20buffering&In-Reply-To=%3CDD7FA35D-D1C6-4012-8164-0C5BE452B2D1%40bvanderveen.com%3E"
       TITLE="[ragel-users] EOF actions and buffering">b at bvanderveen.com
       </A><BR>
    <I>Fri Jan 21 02:52:09 UTC 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="001231.html">[ragel-users] EOF actions and buffering
</A></li>
        <LI>Next message: <A HREF="001234.html">[ragel-users] EOF actions and buffering
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1233">[ date ]</a>
              <a href="thread.html#1233">[ thread ]</a>
              <a href="subject.html#1233">[ subject ]</a>
              <a href="author.html#1233">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks for the tips, Adrian.

I've poked through the material you referenced and gleaned a bit. Please check my understanding and let me know if something is missing.

On Jan 20, 2011, at 3:43 PM, Adrian Thurston wrote:
&gt;<i> <A HREF="http://svn.complang.org/choicesocial/trunk/dsnpd/parser.rl">http://svn.complang.org/choicesocial/trunk/dsnpd/parser.rl</A>
</I>
The parser impl referenced above uses an intermediary buffer; it clears the intermediary buffer on the &quot;enter&quot; action of a token to be extracted, copies each character of the token into a buffer on the &quot;any&quot; action, and when the &quot;leaving&quot; action is executed, the contents of that intermediary buffer are then copied into the destination string. Will this approach will work regardless of buffer boundaries?

&gt;<i> There are other approaches though. See the Ragel manual (5.9) for a short discussion.
</I>
This approach requires the user to make sure the ts pointer remains valid in the buffer provided each time the machine is executed (which depending on how you're handing IO may mean some memory copying). It allows an action to have access to the a contiguous block of memory (given by ts and fpc) which defines the matched token. Does this approach only work with the state chart syntax?






_______________________________________________
ragel-users mailing list
<A HREF="http://www.colm.net/cgi-bin/mailman/listinfo/ragel">ragel-users at complang.org</A>
<A HREF="http://www.complang.org/mailman/listinfo/ragel-users">http://www.complang.org/mailman/listinfo/ragel-users</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001231.html">[ragel-users] EOF actions and buffering
</A></li>
	<LI>Next message: <A HREF="001234.html">[ragel-users] EOF actions and buffering
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1233">[ date ]</a>
              <a href="thread.html#1233">[ thread ]</a>
              <a href="subject.html#1233">[ subject ]</a>
              <a href="author.html#1233">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.colm.net/cgi-bin/mailman/listinfo/ragel">More information about the ragel
mailing list</a><br>
</body></html>
