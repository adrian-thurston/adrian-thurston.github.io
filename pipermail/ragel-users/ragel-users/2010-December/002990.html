<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ragel-users] Conditional parsing, is it possible?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:ragel-users%40colm.net?Subject=Re%3A%20%5Bragel-users%5D%20Conditional%20parsing%2C%20is%20it%20possible%3F&In-Reply-To=%3C4D1BDFBF.2040608%40esentire.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="002989.html">
   <LINK REL="Next"  HREF="002991.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ragel-users] Conditional parsing, is it possible?</H1>
    <B>Adrian Thurston</B> 
    <A HREF="mailto:ragel-users%40colm.net?Subject=Re%3A%20%5Bragel-users%5D%20Conditional%20parsing%2C%20is%20it%20possible%3F&In-Reply-To=%3C4D1BDFBF.2040608%40esentire.com%3E"
       TITLE="[ragel-users] Conditional parsing, is it possible?">adrian.thurston at esentire.com
       </A><BR>
    <I>Thu Dec 30 01:26:23 UTC 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="002989.html">[ragel-users] Conditional parsing, is it possible?
</A></li>
        <LI>Next message: <A HREF="002991.html">[ragel-users] Conditional parsing, is it possible?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2990">[ date ]</a>
              <a href="thread.html#2990">[ thread ]</a>
              <a href="subject.html#2990">[ subject ]</a>
              <a href="author.html#2990">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Iñaki,

There are a few approaches. You can do it using fgoto/fcall/fret, but 
then you lose the single-regex property. You can also do it using 
conditions, which are a more recent feature. The drawback there is that 
you run into trouble if using int and unsigned int alphabet types (as 
opposed to char). That won't affect you though. See the manual and the 
mailing list for more info about conditions.

-Adrian

On 10-12-29 05:26 PM, Iñaki Baz Castillo wrote:
&gt;<i> 2010/12/30 Iñaki Baz Castillo&lt;<A HREF="http://www.colm.net/cgi-bin/mailman/listinfo/ragel-users">ibc at aliax.net</A>&gt;:
</I>&gt;&gt;<i> Hi, I wonder if there is a way to parse (or not) some fragments of the
</I>&gt;&gt;<i> stream depending on previous parsed elements.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> For example, in HTTP, imagine I just want to parse a custom header
</I>&gt;&gt;<i> &quot;X-MyHeader&quot; (which has a specific value format)  in case the request
</I>&gt;&gt;<i> method is POST. But in case it's a GET then I just want to store the
</I>&gt;&gt;<i> header raw value.
</I>&gt;<i>
</I>&gt;<i> This is, there would be two valid syntax for &quot;X-MyHeader&quot;:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>    generic_value = any* -CRLF;
</I>&gt;<i>    x_value = [0-9] &quot;:&quot; [a-z]+;
</I>&gt;<i>    x_myheader_value = generic_value | x_value;
</I>&gt;<i>
</I>&gt;<i> If a previous field of the stream (the request method) is POST (an
</I>&gt;<i> action could set a variable) I want 'x_myheader_value' just to be
</I>&gt;<i> checked with 'x_value', and if the method is other, then
</I>&gt;<i> 'x_myheader_value' should be just checked with 'generic_value'.
</I>&gt;<i>
</I>&gt;<i> Thanks for any suggestion or clarification.
</I>&gt;<i>
</I>&gt;<i>
</I>
_______________________________________________
ragel-users mailing list
<A HREF="http://www.colm.net/cgi-bin/mailman/listinfo/ragel-users">ragel-users at complang.org</A>
<A HREF="http://www.complang.org/mailman/listinfo/ragel-users">http://www.complang.org/mailman/listinfo/ragel-users</A>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002989.html">[ragel-users] Conditional parsing, is it possible?
</A></li>
	<LI>Next message: <A HREF="002991.html">[ragel-users] Conditional parsing, is it possible?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2990">[ date ]</a>
              <a href="thread.html#2990">[ thread ]</a>
              <a href="subject.html#2990">[ subject ]</a>
              <a href="author.html#2990">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.colm.net/cgi-bin/mailman/listinfo/ragel-users">More information about the ragel-users
mailing list</a><br>
</body></html>
