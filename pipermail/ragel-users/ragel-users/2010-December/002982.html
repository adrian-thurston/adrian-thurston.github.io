<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ragel-users] [PATCH] D2 support
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:ragel-users%40colm.net?Subject=Re%3A%20%5Bragel-users%5D%20%5BPATCH%5D%20D2%20support&In-Reply-To=%3C4D104797.5040304%40complang.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="002981.html">
   <LINK REL="Next"  HREF="002983.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ragel-users] [PATCH] D2 support</H1>
    <B>Adrian Thurston</B> 
    <A HREF="mailto:ragel-users%40colm.net?Subject=Re%3A%20%5Bragel-users%5D%20%5BPATCH%5D%20D2%20support&In-Reply-To=%3C4D104797.5040304%40complang.org%3E"
       TITLE="[ragel-users] [PATCH] D2 support">thurston at complang.org
       </A><BR>
    <I>Tue Dec 21 06:22:15 UTC 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="002981.html">[ragel-users] [PATCH] D2 support
</A></li>
        <LI>Next message: <A HREF="002983.html">[ragel-users] [PATCH] D2 support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2982">[ date ]</a>
              <a href="thread.html#2982">[ thread ]</a>
              <a href="subject.html#2982">[ subject ]</a>
              <a href="author.html#2982">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi thanks for your patch! I'm hoping to integrate it in the next couple 
of weeks. At that time I'll look into the issue of dynamic arrays that 
you pointed out.

Regards,
  Adrian

Johannes Pfau wrote:
&gt;<i> Hello,
</I>&gt;<i> I attached a patch to add D2 support to Ragel. D2 is quite different
</I>&gt;<i> from D1 so I created new D2 subclasses in the cd* files. I chose -E for
</I>&gt;<i> the commandline switch, but it could be changed to something else. D2
</I>&gt;<i> also needs a special syntax for const pointers: const(uint)* is a
</I>&gt;<i> mutable pointer to a const uint. I introduced a PTR_CONST_END function
</I>&gt;<i> to generate that D2 output. The generated D2 code is entirely correct
</I>&gt;<i> now and I tested it with some HTML header parsers.
</I>&gt;<i> 
</I>&gt;<i> There's one performance related problem though: In D2 a ubyte[] is
</I>&gt;<i> different from a ubyte[n], even if both arrays are initialized at
</I>&gt;<i> compile time. The ubyte[] generates a resizeable array at runtime, which
</I>&gt;<i> causes a performance problem. The ubyte[n] syntax should instead be used
</I>&gt;<i> for static constant arrays. But as ragel doesn't pass the number of
</I>&gt;<i> array entries to the OPEN_ARRAY function, there's no easy way to fix
</I>&gt;<i> that. So I wanted to ask for advice on how to implement that properly.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> ------------------------------------------------------------------------
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> ragel-users mailing list
</I>&gt;<i> <A HREF="http://www.colm.net/cgi-bin/mailman/listinfo/ragel-users">ragel-users at complang.org</A>
</I>&gt;<i> <A HREF="http://www.complang.org/mailman/listinfo/ragel-users">http://www.complang.org/mailman/listinfo/ragel-users</A>
</I>
_______________________________________________
ragel-users mailing list
<A HREF="http://www.colm.net/cgi-bin/mailman/listinfo/ragel-users">ragel-users at complang.org</A>
<A HREF="http://www.complang.org/mailman/listinfo/ragel-users">http://www.complang.org/mailman/listinfo/ragel-users</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002981.html">[ragel-users] [PATCH] D2 support
</A></li>
	<LI>Next message: <A HREF="002983.html">[ragel-users] [PATCH] D2 support
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2982">[ date ]</a>
              <a href="thread.html#2982">[ thread ]</a>
              <a href="subject.html#2982">[ subject ]</a>
              <a href="author.html#2982">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.colm.net/cgi-bin/mailman/listinfo/ragel-users">More information about the ragel-users
mailing list</a><br>
</body></html>
