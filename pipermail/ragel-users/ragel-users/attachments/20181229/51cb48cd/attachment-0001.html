<tt>
&lt;!DOCTYPE&nbsp;html&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;XHTML&nbsp;1.0&nbsp;Transitional//EN&quot;&gt;<br>
&lt;html&gt;&lt;body&nbsp;style='font-size:&nbsp;14pt;&nbsp;font-family:&nbsp;Verdana,Geneva,sans-serif'&gt;<br>
&lt;p&gt;Hi,&nbsp;yes&nbsp;it&nbsp;is&nbsp;possible,&nbsp;scanners&nbsp;execute&nbsp;in&nbsp;parallel,&nbsp;however&nbsp;you&nbsp;don't&nbsp;get&nbsp;all&nbsp;the&nbsp;guarantees&nbsp;you&nbsp;normally&nbsp;get&nbsp;when&nbsp;you&nbsp;simply&nbsp;union.&nbsp;There&nbsp;may&nbsp;be&nbsp;some&nbsp;backtracking&nbsp;and&nbsp;leaving&nbsp;actions&nbsp;don't&nbsp;always&nbsp;execute.&nbsp;This&nbsp;second&nbsp;issue&nbsp;is&nbsp;something&nbsp;I'm&nbsp;hoping&nbsp;to&nbsp;fix&nbsp;with&nbsp;ragel&nbsp;8.&lt;/p&gt;<br>
&lt;p&gt;If&nbsp;you&nbsp;want&nbsp;to&nbsp;do&nbsp;things&nbsp;in&nbsp;parallel&nbsp;as&nbsp;is&nbsp;the&nbsp;case&nbsp;with&nbsp;a&nbsp;normal&nbsp;union,&nbsp;you&nbsp;can&nbsp;scan&nbsp;using&nbsp;the&nbsp;**&nbsp;operator.&nbsp;This&nbsp;is&nbsp;a&nbsp;kleene&nbsp;star&nbsp;that&nbsp;favours&nbsp;staying&nbsp;in&nbsp;the&nbsp;machine&nbsp;over&nbsp;starting&nbsp;to&nbsp;match&nbsp;a&nbsp;new&nbsp;token.&nbsp;If&nbsp;that&nbsp;doesn't&nbsp;work&nbsp;for&nbsp;you,&nbsp;you&nbsp;can&nbsp;implement&nbsp;the&nbsp;scanning&nbsp;functionality&nbsp;yourself,&nbsp;just&nbsp;using&nbsp;ragel&nbsp;to&nbsp;match&nbsp;a&nbsp;single&nbsp;token&nbsp;from&nbsp;the&nbsp;current&nbsp;starting&nbsp;location.&nbsp;Simply&nbsp;union&nbsp;all&nbsp;your&nbsp;patterns&nbsp;and&nbsp;wrap&nbsp;that&nbsp;in&nbsp;a&nbsp;loop.&lt;/p&gt;<br>
&lt;p&gt;On&nbsp;2018-12-16&nbsp;15:33,&nbsp;Filipp&nbsp;Andronov&nbsp;wrote:&lt;/p&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;style=&quot;padding-left:5px;&nbsp;border-left:#1010ff&nbsp;2px&nbsp;solid;&nbsp;margin-left:5px&quot;&gt;&lt;!--&nbsp;html&nbsp;ignored&nbsp;--&gt;&lt;!--&nbsp;head&nbsp;ignored&nbsp;--&gt;&lt;!--&nbsp;meta&nbsp;ignored&nbsp;--&gt;<br>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Good&nbsp;day,<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;Please&nbsp;help&nbsp;me&nbsp;to&nbsp;understand&nbsp;if&nbsp;the&nbsp;following&nbsp;thing&nbsp;is&nbsp;possible&nbsp;with&nbsp;using&nbsp;ragel.&nbsp;I&nbsp;have&nbsp;a&nbsp;database&nbsp;of&nbsp;UTF-8&nbsp;patterns,&nbsp;which&nbsp;I've&nbsp;compiled&nbsp;in&nbsp;ragel&nbsp;&lt;span&nbsp;class=&quot;gmail-il&quot;&gt;machine&lt;/span&gt;&nbsp;with&nbsp;using&nbsp;a&nbsp;bit&nbsp;of&nbsp;python&nbsp;magic.&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;From&nbsp;that&nbsp;compiled&nbsp;databse&nbsp;Im&nbsp;able&nbsp;to&nbsp;build&nbsp;a&nbsp;scanner:&lt;/div&gt;<br>
&lt;div&gt;main&nbsp;:=&nbsp;|*&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&nbsp;Database&nbsp;=&gt;&nbsp;{issue_token;&nbsp;fbreak}&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&nbsp;any;&nbsp;#&nbsp;ignore&nbsp;unmatched&lt;/div&gt;<br>
&lt;div&gt;*|&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;Having&nbsp;a&nbsp;stream&nbsp;of&nbsp;recognized&nbsp;tokens,&nbsp;I'd&nbsp;like&nbsp;to&nbsp;calculate&nbsp;some&nbsp;properties&nbsp;of&nbsp;each&nbsp;token,&nbsp;like&nbsp;how&nbsp;many&nbsp;runes&nbsp;are&nbsp;inside,&nbsp;different&nbsp;Unicode&nbsp;Scripts&nbsp;bounds&nbsp;and&nbsp;Class&nbsp;bounds.&nbsp;Right&nbsp;now&nbsp;Im&nbsp;doing&nbsp;that&nbsp;by&nbsp;a&nbsp;separate&nbsp;scan&nbsp;of&nbsp;found&nbsp;tokens&nbsp;text,&nbsp;but&nbsp;could&nbsp;it&nbsp;be&nbsp;done&nbsp;better&nbsp;and&nbsp;embbed&nbsp;inside&nbsp;scanner&nbsp;itself?&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;For&nbsp;each&nbsp;property&nbsp;I&nbsp;could&nbsp;easealy&nbsp;generate&nbsp;FSM&nbsp;from&nbsp;UnicodeData&nbsp;files&nbsp;but&nbsp;have&nbsp;no&nbsp;idea&nbsp;how&nbsp;to&nbsp;compose&nbsp;machines&nbsp;to&nbsp;run&nbsp;in&nbsp;parallel?&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;Idially&nbsp;a&nbsp;such&nbsp;combined&nbsp;&lt;span&nbsp;class=&quot;gmail-il&quot;&gt;machine&lt;/span&gt;&nbsp;would&nbsp;analyse&nbsp;input&nbsp;stream&nbsp;and&nbsp;call&nbsp;actions&nbsp;like:&lt;/div&gt;<br>
&lt;div&gt;-&nbsp;PatternStart&lt;/div&gt;<br>
&lt;div&gt;-&nbsp;New&nbsp;rune&lt;/div&gt;<br>
&lt;div&gt;-&nbsp;New&nbsp;Class&lt;/div&gt;<br>
&lt;div&gt;-&nbsp;New&nbsp;rune&lt;/div&gt;<br>
&lt;div&gt;-&nbsp;New&nbsp;Class&lt;/div&gt;<br>
&lt;div&gt;-&nbsp;New&nbsp;Script&lt;/div&gt;<br>
&lt;div&gt;-&nbsp;PatternFound&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;But&nbsp;some&nbsp;other&nbsp;approximation&nbsp;is&nbsp;fine&nbsp;too&nbsp;:)&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
--&nbsp;&lt;br&nbsp;/&gt;<br>
&lt;div&nbsp;class=&quot;gmail_signature&quot;&nbsp;dir=&quot;ltr&quot;&gt;<br>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;<br>
&lt;div&gt;<br>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Thanks&nbsp;and&nbsp;regards,&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;Philip&nbsp;Andronov&lt;br&nbsp;/&gt;------------------------------------------&lt;br&nbsp;/&gt;Leading&nbsp;software&nbsp;engineer,<br>
&lt;div&gt;&lt;a&nbsp;href=&quot;http://mail.ru&quot;&gt;mail.ru&lt;/a&gt;&lt;/div&gt;<br>
&lt;div&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;br&nbsp;/&gt;<br>
&lt;pre&gt;_______________________________________________<br>
ragel-users&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;href=&quot;mailto:ragel-users@colm.net&quot;&gt;ragel-users@colm.net&lt;/a&gt;<br>
&lt;a&nbsp;href=&quot;http://www.colm.net/cgi-bin/mailman/listinfo/ragel-users&quot;&gt;http://www.colm.net/cgi-bin/mailman/listinfo/ragel-users&lt;/a&gt;<br>
&lt;/pre&gt;<br>
&lt;/blockquote&gt;<br>
&lt;/body&gt;&lt;/html&gt;<br>

</tt>
