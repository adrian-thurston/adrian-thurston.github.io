<tt>
&lt;p&gt;Hi&lt;/p&gt;<br>
&lt;p&gt;When&nbsp;using&nbsp;this&nbsp;scanner&nbsp;&nbsp;(I&nbsp;removed&nbsp;actions),&nbsp;ragel&nbsp;seems&nbsp;to&nbsp;loop&nbsp;endless.&lt;/p&gt;<br>
&lt;p&gt;%%{&lt;br&nbsp;/&gt;&nbsp;&nbsp;&nbsp;&nbsp;machine&nbsp;configuration_parser;&lt;br&nbsp;/&gt;&nbsp;&nbsp;&nbsp;&nbsp;include&nbsp;scanner_common&nbsp;&quot;scanner.rl&quot;;&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&nbsp;&nbsp;&nbsp;&nbsp;newline&nbsp;=&nbsp;'\r'?&nbsp;&nbsp;'\n';&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&nbsp;&nbsp;&nbsp;&nbsp;comment&nbsp;=&nbsp;'#'&nbsp;any*&nbsp;--&nbsp;newline;&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&nbsp;&nbsp;&nbsp;&nbsp;bulk&nbsp;=&nbsp;([\t\v\f\&nbsp;]&nbsp;|&nbsp;comment&nbsp;|&nbsp;newline)+;&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&nbsp;&nbsp;&nbsp;&nbsp;key&nbsp;=&nbsp;bulk?&nbsp;(alnum&nbsp;([\_\.]?&nbsp;alnum)*);&nbsp;&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;=&nbsp;bulk?&nbsp;&quot;\&quot;&quot;&nbsp;any*&nbsp;:&gt;&gt;&nbsp;&quot;\&quot;&quot;;&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&nbsp;&nbsp;&nbsp;&nbsp;values&nbsp;=&nbsp;bulk?&nbsp;value&nbsp;(bulk?&nbsp;','&nbsp;value)*;&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&nbsp;&nbsp;&nbsp;&nbsp;assign&nbsp;=&nbsp;key&nbsp;bulk?&nbsp;'='&nbsp;values;&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&nbsp;&nbsp;&nbsp;&nbsp;main&nbsp;:=&nbsp;assign*&nbsp;bulk?;&lt;br&nbsp;/&gt;}%%&lt;/p&gt;<br>
&lt;p&gt;&nbsp;&lt;/p&gt;<br>
&lt;p&gt;But&nbsp;I&nbsp;works&nbsp;like&nbsp;a&nbsp;charm&nbsp;when:&lt;/p&gt;<br>
&lt;p&gt;&nbsp;&nbsp;&nbsp;&nbsp;comment&nbsp;=&nbsp;'#'&nbsp;any*&nbsp;--&nbsp;newline;&lt;/p&gt;<br>
&lt;p&gt;become:&lt;/p&gt;<br>
&lt;p&gt;&nbsp;&nbsp;&nbsp;&nbsp;comment&nbsp;=&nbsp;'#'&nbsp;any*&nbsp;:&gt;&gt;&nbsp;newline;&lt;/p&gt;<br>
&lt;p&gt;&nbsp;&lt;/p&gt;
</tt>
