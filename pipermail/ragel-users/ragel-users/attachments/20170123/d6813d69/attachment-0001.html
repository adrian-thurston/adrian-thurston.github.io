<tt>
&lt;!DOCTYPE&nbsp;html&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;XHTML&nbsp;1.0&nbsp;Transitional//EN&quot;&gt;<br>
&lt;html&gt;&lt;body&nbsp;style='font-size:&nbsp;14pt;&nbsp;font-family:&nbsp;Verdana,Geneva,sans-serif'&gt;<br>
&lt;p&gt;Hi&nbsp;Andrey,&lt;/p&gt;<br>
&lt;p&gt;It's&nbsp;because&nbsp;your&nbsp;content&nbsp;includes&nbsp;the&nbsp;open&nbsp;of&nbsp;an&nbsp;HTML&nbsp;tag.&nbsp;So&nbsp;content&nbsp;is&nbsp;extened,&nbsp;rather&nbsp;than&nbsp;wrapping&nbsp;around&nbsp;to&nbsp;start&nbsp;a&nbsp;tag.&nbsp;It&nbsp;works&nbsp;when&nbsp;there&nbsp;is&nbsp;a&nbsp;space&nbsp;in&nbsp;front&nbsp;because&nbsp;only&nbsp;the&nbsp;space&nbsp;FSM&nbsp;is&nbsp;active&nbsp;and&nbsp;won't&nbsp;be&nbsp;extended.&nbsp;The&nbsp;machine&nbsp;wraps&nbsp;around.&lt;/p&gt;<br>
&lt;p&gt;-Adrian&lt;/p&gt;<br>
&lt;p&gt;&nbsp;&lt;/p&gt;<br>
&lt;p&gt;On&nbsp;2017-01-19&nbsp;01:38,&nbsp;Andrey&nbsp;Kulikov&nbsp;wrote:&lt;/p&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;style=&quot;padding-left:5px;&nbsp;border-left:#1010ff&nbsp;2px&nbsp;solid;&nbsp;margin-left:5px&quot;&gt;&lt;!--&nbsp;html&nbsp;ignored&nbsp;--&gt;&lt;!--&nbsp;head&nbsp;ignored&nbsp;--&gt;&lt;!--&nbsp;meta&nbsp;ignored&nbsp;--&gt;<br>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;<br>
&lt;div&gt;<br>
&lt;div&gt;<br>
&lt;div&gt;<br>
&lt;div&gt;<br>
&lt;div&gt;<br>
&lt;div&gt;<br>
&lt;div&gt;<br>
&lt;div&gt;<br>
&lt;div&gt;<br>
&lt;div&gt;<br>
&lt;div&gt;<br>
&lt;div&gt;Hello,&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&lt;/div&gt;<br>
In&nbsp;my&nbsp;project&nbsp;I&nbsp;need&nbsp;to&nbsp;extract&nbsp;links&nbsp;from&nbsp;HTML&nbsp;document.&lt;/div&gt;<br>
For&nbsp;this&nbsp;purpose&nbsp;I've&nbsp;prepared&nbsp;ragel&nbsp;HTML&nbsp;grammar,&nbsp;primarily&nbsp;based&nbsp;on&nbsp;this&nbsp;work:&lt;br&nbsp;/&gt;&lt;a&nbsp;href=&quot;https://github.com/brianpane/jitify-core/blob/master/src/core/jitify_html_lexer.rl&quot;&gt;https://github.com/brianpane/jitify-core/blob/master/src/core/jitify_html_lexer.rl&lt;/a&gt;&lt;/div&gt;<br>
(mentioned&nbsp;here:&nbsp;&lt;a&nbsp;href=&quot;http://ragel-users.complang.narkive.com/qhjr33zj/ragel-grammars-for-html-css-and-javascript&quot;&gt;http://ragel-users.complang.narkive.com/qhjr33zj/ragel-grammars-for-html-css-and-javascript&lt;/a&gt;&nbsp;)&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&lt;/div&gt;<br>
Almost&nbsp;all&nbsp;works&nbsp;well&nbsp;(thanks&nbsp;for&nbsp;the&nbsp;great&nbsp;tool!),&nbsp;except&nbsp;one&nbsp;issue&nbsp;I&nbsp;can't&nbsp;overcome&nbsp;to&nbsp;date:&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;If&nbsp;I&nbsp;specify&nbsp;this&nbsp;thext&nbsp;as&nbsp;an&nbsp;input:&lt;br&nbsp;/&gt;bbbb&nbsp;&lt;a&nbsp;href=&quot;first_link.aspx&quot;&gt;&nbsp;&nbsp;cccc&lt;a&nbsp;href=&quot;/second_link.aspx&quot;&gt;&lt;/div&gt;<br>
my&nbsp;parser&nbsp;can&nbsp;correctly&nbsp;extract&nbsp;first&nbsp;link,&nbsp;but&nbsp;not&nbsp;the&nbsp;second&nbsp;one.&lt;/div&gt;<br>
The&nbsp;difference&nbsp;between&nbsp;them&nbsp;is&nbsp;that&nbsp;there&nbsp;is&nbsp;a&nbsp;space&nbsp;between&nbsp;'bbbb'&nbsp;and&nbsp;'&lt;a',&nbsp;but&nbsp;no&nbsp;spaces&nbsp;between&nbsp;'cccc'&nbsp;and&nbsp;'&lt;a'.&lt;/div&gt;<br>
&lt;br&nbsp;/&gt;In&nbsp;general,&nbsp;if&nbsp;any&nbsp;text,&nbsp;except&nbsp;spaces,&nbsp;exists&nbsp;before&nbsp;'&lt;a'&nbsp;tag&nbsp;it&nbsp;makes&nbsp;parses&nbsp;consider&nbsp;it&nbsp;as&nbsp;content,&nbsp;and&nbsp;parser&nbsp;do&nbsp;not&nbsp;recognize&nbsp;tag&nbsp;open.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&lt;/div&gt;<br>
Could&nbsp;please&nbsp;anyone&nbsp;give&nbsp;any&nbsp;hint&nbsp;how&nbsp;to&nbsp;improve&nbsp;existing&nbsp;grammar,&nbsp;in&nbsp;order&nbsp;to&nbsp;make&nbsp;it&nbsp;recognize&nbsp;tag&nbsp;open?&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&lt;/div&gt;<br>
Please&nbsp;find&nbsp;attached&nbsp;intentionally&nbsp;simplified&nbsp;sample&nbsp;with&nbsp;grammar,&nbsp;aiming&nbsp;to&nbsp;work&nbsp;as&nbsp;C&nbsp;program&nbsp;(&nbsp;ngx_url_html_portion.rl&nbsp;).&lt;/div&gt;<br>
There&nbsp;is&nbsp;also&nbsp;input&nbsp;file&nbsp;input-nbsp.html&nbsp;,&nbsp;which&nbsp;expected&nbsp;to&nbsp;contain&nbsp;input&nbsp;for&nbsp;the&nbsp;application.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&lt;/div&gt;<br>
In&nbsp;order&nbsp;to&nbsp;play&nbsp;with&nbsp;it,&nbsp;make&nbsp;.c-file&nbsp;from&nbsp;grammar:&lt;/div&gt;<br>
ragel&nbsp;ngx_url_html_portion.rl<br>
&lt;div&gt;<br>
&lt;div&gt;<br>
&lt;div&gt;then&nbsp;compile&nbsp;resulting&nbsp;.c-file&nbsp;and&nbsp;run&nbsp;programm.&lt;/div&gt;<br>
&lt;div&gt;Input&nbsp;file&nbsp;should&nbsp;be&nbsp;in&nbsp;the&nbsp;same&nbsp;directory.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;&lt;/div&gt;<br>
&lt;div&gt;Will&nbsp;be&nbsp;&lt;span&nbsp;id=&quot;gmail-result_box&quot;&nbsp;class=&quot;gmail-short_text&quot;&gt;&lt;span&nbsp;class=&quot;gmail-&quot;&gt;sincerely&nbsp;&lt;/span&gt;&lt;/span&gt;grateful&nbsp;for&nbsp;any&nbsp;clue.&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;--&lt;/div&gt;<br>
&lt;div&gt;Andrey&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;br&nbsp;/&gt;<br>
&lt;pre&gt;_______________________________________________<br>
ragel&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;href=&quot;mailto:ragel@colm.net&quot;&gt;ragel@colm.net&lt;/a&gt;<br>
&lt;a&nbsp;href=&quot;http://www.colm.net/cgi-bin/mailman/listinfo/ragel&quot;&gt;http://www.colm.net/cgi-bin/mailman/listinfo/ragel&lt;/a&gt;<br>
&lt;/pre&gt;<br>
&lt;/blockquote&gt;<br>
&lt;/body&gt;&lt;/html&gt;<br>

</tt>
