<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> RFC-2822 recognizer: best way to test it?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:ragel-users%40colm.net?Subject=Re%3A%20RFC-2822%20recognizer%3A%20best%20way%20to%20test%20it%3F&In-Reply-To=%3C1179927816.232806.277230%40u30g2000hsc.googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="002014.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>RFC-2822 recognizer: best way to test it?</H1>
    <B>Wincent Colaiuta</B> 
    <A HREF="mailto:ragel-users%40colm.net?Subject=Re%3A%20RFC-2822%20recognizer%3A%20best%20way%20to%20test%20it%3F&In-Reply-To=%3C1179927816.232806.277230%40u30g2000hsc.googlegroups.com%3E"
       TITLE="RFC-2822 recognizer: best way to test it?">w... at wincent.com
       </A><BR>
    <I>Wed May 23 13:43:36 UTC 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="002014.html">[ragel-users] Basic &quot;Hello World&quot; Example?
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#246">[ date ]</a>
              <a href="thread.html#246">[ thread ]</a>
              <a href="subject.html#246">[ subject ]</a>
              <a href="author.html#246">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi!

As my first Ragel project I'm writing a recognizer for RFC-2822 email
addresses. All the recognizer has to do is scan an input string and
decide whether or not it conforms to RFC-2822. I'll write a little bit
of background first; but in the end my question is, what's the best
way to test this?

I basically started by taking RFC-2822 (&lt;<A HREF="http://www.ietf.org/rfc/">http://www.ietf.org/rfc/</A>
rfc2822.txt&gt;) and taking the rules -- written in the RFC using
Augmented Backus-Naur Form (ABNF) notation (&lt;<A HREF="http://www.ietf.org/rfc/">http://www.ietf.org/rfc/</A>
rfc2234.txt&gt;) -- and rewriting them using Ragel syntax.

There is one circular dependency in those rules (&quot;comment&quot; needs
&quot;ccontent&quot;, but &quot;ccontent&quot; needs &quot;comment&quot;) and so for the time being
I've commented out that dependency (in other words, nesting of
comments inside comments isn't yet implemented). If everything works
out ok I will as a last step use the trick described here &lt;<A HREF="http://">http://</A>
groups.google.com/group/ragel-users/browse_thread/thread/
f3fdde1d51c86aaf/e4f2b110236b8660&gt; to manually handle the recursion.

Running ragel on the input causes it to spin forever, so I've
simplified some of the rules (mostly by commenting out the optional
whitespace) and now it compiles (using C as the output language).
Before I begin tweaking the rules back into conformance with the RFC I
wanted to ask about testing techniques.

What I have is effectively a black box where I stick input in and get
success or failure message back at the end. Is there any way to break
this down into smaller parts of testing purposes? In other words,
instead of testing that &quot;<A HREF="http://www.colm.net/cgi-bin/mailman/listinfo/ragel">f... at example.com</A>&quot; passes (it does), can I test
that &quot;example.com&quot; matches  a &quot;domain&quot;, or even lower, that &quot;foo&quot; is
valid &quot;atext&quot;. Basically, I can test that the whole works, but I'd be
much more confident if I could individually test the parts as well.

What's the best methodology here?

Cheers,
Wincent

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002014.html">[ragel-users] Basic &quot;Hello World&quot; Example?
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#246">[ date ]</a>
              <a href="thread.html#246">[ thread ]</a>
              <a href="subject.html#246">[ subject ]</a>
              <a href="author.html#246">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.colm.net/cgi-bin/mailman/listinfo/ragel-users">More information about the ragel-users
mailing list</a><br>
</body></html>
