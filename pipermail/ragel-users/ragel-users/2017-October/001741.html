<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ragel] EOF actions question
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:ragel%40colm.net?Subject=Re%3A%20%5Bragel%5D%20EOF%20actions%20question&In-Reply-To=%3CE41843F7-325F-49E1-9794-E9C14A40DE45%40autodeist.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="001739.html">
   <LINK REL="Next"  HREF="001742.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ragel] EOF actions question</H1>
    <B>Will Dowling</B> 
    <A HREF="mailto:ragel%40colm.net?Subject=Re%3A%20%5Bragel%5D%20EOF%20actions%20question&In-Reply-To=%3CE41843F7-325F-49E1-9794-E9C14A40DE45%40autodeist.com%3E"
       TITLE="[ragel] EOF actions question">will at autodeist.com
       </A><BR>
    <I>Sun Oct 22 14:12:47 UTC 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="001739.html">[ragel] Ragel sanitise output - memory leaks
</A></li>
        <LI>Next message: <A HREF="001742.html">[ragel] EOF actions question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1741">[ date ]</a>
              <a href="thread.html#1741">[ thread ]</a>
              <a href="subject.html#1741">[ subject ]</a>
              <a href="author.html#1741">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi folks,

I’m a newcomer to ragel and was hoping someone can help me better understand when actions execute.
Specifically, I’m not sure why an EOF final state action is not firing.

Here’s a self-contained example of what I’m trying to achieve:
<A HREF="https://gist.github.com/dowlingw/39953db1b166003c1474fa10a20616de">https://gist.github.com/dowlingw/39953db1b166003c1474fa10a20616de</A>

In the example, I’m keeping track of the character pointer to extract the token when the machine is finished.
This is modelled around how I’ve seen it done elsewhere, but maybe there’s a better way.

From my understanding from the guide and looking at the graphviz output:

%capture 	would never fire because the machine is at EOF, so never exits the userid machine
@capture 	will work, but will execute every character the userid machine processes
%/capture 	should(?) fire because the machine is in the userid state when it reaches EOF

But the last one doesn’t appear to work the way I’d expect - so I’m probably misunderstanding things.

If anyone is able to point me in the right direction, I’d be super grateful.
(On the unlikely chance it’s something environmental, I’m running Ragel 6.10 on go1.8.3 darwin/amd64)

In either case, thanks for maintaining an awesome tool!

Cheers :)


Will Dowling

E: <A HREF="http://www.colm.net/cgi-bin/mailman/listinfo/ragel">will at autodeist.com</A>


</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001739.html">[ragel] Ragel sanitise output - memory leaks
</A></li>
	<LI>Next message: <A HREF="001742.html">[ragel] EOF actions question
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1741">[ date ]</a>
              <a href="thread.html#1741">[ thread ]</a>
              <a href="subject.html#1741">[ subject ]</a>
              <a href="author.html#1741">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.colm.net/cgi-bin/mailman/listinfo/ragel">More information about the ragel
mailing list</a><br>
</body></html>
