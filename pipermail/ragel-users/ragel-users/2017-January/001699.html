<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ragel] Fixing issues with ragel HTML grammar.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:ragel%40colm.net?Subject=Re%3A%20%5Bragel%5D%20Fixing%20issues%20with%20ragel%20HTML%20grammar.&In-Reply-To=%3CCAMdTb%2BegAyS%2BNToUBjSqWLXfN3xG%2BgYg8PUmHGCqAVCwzugo8Q%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   
   <LINK REL="Next"  HREF="001700.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ragel] Fixing issues with ragel HTML grammar.</H1>
    <B>Andrey Kulikov</B> 
    <A HREF="mailto:ragel%40colm.net?Subject=Re%3A%20%5Bragel%5D%20Fixing%20issues%20with%20ragel%20HTML%20grammar.&In-Reply-To=%3CCAMdTb%2BegAyS%2BNToUBjSqWLXfN3xG%2BgYg8PUmHGCqAVCwzugo8Q%40mail.gmail.com%3E"
       TITLE="[ragel] Fixing issues with ragel HTML grammar.">amdeich at gmail.com
       </A><BR>
    <I>Wed Jan 18 18:38:17 UTC 2017</I>
    <P><UL>
        
        <LI>Next message: <A HREF="001700.html">[ragel] Fixing issues with ragel HTML grammar.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1699">[ date ]</a>
              <a href="thread.html#1699">[ thread ]</a>
              <a href="subject.html#1699">[ subject ]</a>
              <a href="author.html#1699">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

In my project I need to extract links from HTML document.
For this purpose I've prepared ragel HTML grammar, primarily based on this
work:
<A HREF="https://github.com/brianpane/jitify-core/blob/master/src/core/jitify_html_lexer.rl">https://github.com/brianpane/jitify-core/blob/master/src/core/jitify_html_lexer.rl</A>
(mentioned here:
<A HREF="http://ragel-users.complang.narkive.com/qhjr33zj/ragel-grammars-for-html-css-and-javascript">http://ragel-users.complang.narkive.com/qhjr33zj/ragel-grammars-for-html-css-and-javascript</A>
)


Almost all works well (thanks for the great tool!), except one issue I
can't overcome to date:

If I specify this thext as an input:
bbbb &lt;a href=&quot;first_link.aspx&quot;&gt;  cccc&lt;a href=&quot;/second_link.aspx&quot;&gt;
my parser can correctly extract first link, but not the second one.
The difference between them is that there is a space between 'bbbb' and
'&lt;a', but no spaces between 'cccc' and '&lt;a'.

In general, if any text, except spaces, exists before '&lt;a' tag it makes
parses consider it as content, and parser do not recognize tag open.

Could please anyone give any hint how to improve existing grammar, in order
to make it recognize tag open?

Please find attached intentionally simplified sample with grammar, aiming
to work as C program ( ngx_url_html_portion.rl ).
There is also input file input-nbsp.html , which expected to contain input
for the application.

In order to play with it, make .c-file from grammar:
ragel ngx_url_html_portion.rl
then compile resulting .c-file and run programm.
Input file should be in the same directory.

Will be sincerely grateful for any clue.

--
Andrey
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://www.colm.net/pipermail/ragel/attachments/20170118/a0f0792d/attachment.html">http://www.colm.net/pipermail/ragel/attachments/20170118/a0f0792d/attachment.html</A>&gt;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://www.colm.net/pipermail/ragel/attachments/20170118/a0f0792d/attachment-0001.html">http://www.colm.net/pipermail/ragel/attachments/20170118/a0f0792d/attachment-0001.html</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ngx_url_html_portion.rl
Type: application/octet-stream
Size: 5384 bytes
Desc: not available
URL: &lt;<A HREF="http://www.colm.net/pipermail/ragel/attachments/20170118/a0f0792d/attachment.obj">http://www.colm.net/pipermail/ragel/attachments/20170118/a0f0792d/attachment.obj</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="001700.html">[ragel] Fixing issues with ragel HTML grammar.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1699">[ date ]</a>
              <a href="thread.html#1699">[ thread ]</a>
              <a href="subject.html#1699">[ subject ]</a>
              <a href="author.html#1699">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.colm.net/cgi-bin/mailman/listinfo/ragel">More information about the ragel
mailing list</a><br>
</body></html>
