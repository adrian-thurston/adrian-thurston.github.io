<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ragel-users] Simple URL parser
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:ragel%40colm.net?Subject=Re%3A%20%5Bragel-users%5D%20Simple%20URL%20parser&In-Reply-To=%3C48368945.9000...%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="000624.html">
   <LINK REL="Next"  HREF="000625.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ragel-users] Simple URL parser</H1>
    <B>hsanson</B> 
    <A HREF="mailto:ragel%40colm.net?Subject=Re%3A%20%5Bragel-users%5D%20Simple%20URL%20parser&In-Reply-To=%3C48368945.9000...%40gmail.com%3E"
       TITLE="[ragel-users] Simple URL parser">hsan... at gmail.com
       </A><BR>
    <I>Fri May 23 09:07:17 UTC 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000624.html">[ragel-users] Re: Simple URL parser
</A></li>
        <LI>Next message: <A HREF="000625.html">[ragel-users] Re: Simple URL parser
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#622">[ date ]</a>
              <a href="thread.html#622">[ thread ]</a>
              <a href="subject.html#622">[ subject ]</a>
              <a href="author.html#622">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ok, so I tried harder and read the URL spec (RFC 1738) and did a direct 
translation from the ABNF syntax to Ragel syntax and now it works (almost).

I still have a few (actually a lot) of questions:

1 - If you see my code (attached) you will see I parse the scheme, 
hostname, port and path parts of the URL using almost identical
     actions. The only difference is the variables used to store the 
parsed strings. Is there a way to pass the actions some variables?
     So I can create a single function and pass the variable to store as 
a parameter?

2 - For some reason the last parsing never finishes. If I pass an URL 
like &quot;<A HREF="http://hostname">http://hostname</A>&quot; the parser gives me the scheme &quot;http&quot; but
     not the hostname. If I pass an URL like &quot;<A HREF="http://hostname:8080">http://hostname:8080</A>&quot; the 
parser outputs the scheme and hostname but not the port. And if
     I provide a path like &quot;<A HREF="http://hostname:8080/file.html">http://hostname:8080/file.html</A>&quot; the parser 
gives me all except for the path. As you see the last string never get's
     parsed and I don't know why??.

3 - Is there a better/cleaner way to do this??

thanks
Horacio

hsanson wrote:
&gt;<i> To learn how to use Ragel I am implementing a simple URL parser that
</I>&gt;<i> receives something like &quot;<A HREF="http://www.ragel.com:8080/file.txt">http://www.ragel.com:8080/file.txt</A>&quot; and
</I>&gt;<i> returns each part (scheme, hostname, port, path) as strings. As I
</I>&gt;<i> understand doing this with Ragel should be a breeze.
</I>&gt;<i>
</I>&gt;<i> Still there is something I am not getting right and would like some
</I>&gt;<i> advice, see code below:
</I>&gt;<i>
</I>&gt;<i> The scheme part seems to work so I assume my understanding of Ragel is
</I>&gt;<i> not that bad. The problem is with the hostname and port parts. The
</I>&gt;<i> hostname action gets called for each character on the hostname, that
</I>&gt;<i> is not the intended behavior and the port action never gets called.
</I>&gt;<i>
</I>&gt;<i> Any tips to take me back on track would be greatly appreciated.
</I>&gt;<i>
</I>&gt;<i> Horacio
</I>&gt;<i>   
</I>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: url.rl
URL: &lt;<A HREF="http://www.colm.net/pipermail/ragel/attachments/20080523/476352ef/attachment.ksh">http://www.colm.net/pipermail/ragel/attachments/20080523/476352ef/attachment.ksh</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000624.html">[ragel-users] Re: Simple URL parser
</A></li>
	<LI>Next message: <A HREF="000625.html">[ragel-users] Re: Simple URL parser
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#622">[ date ]</a>
              <a href="thread.html#622">[ thread ]</a>
              <a href="subject.html#622">[ subject ]</a>
              <a href="author.html#622">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.colm.net/cgi-bin/mailman/listinfo/ragel">More information about the ragel
mailing list</a><br>
</body></html>
