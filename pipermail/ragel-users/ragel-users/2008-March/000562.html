<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> fnext followed by fbreak
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:ragel-users%40colm.net?Subject=Re%3A%20fnext%20followed%20by%20fbreak&In-Reply-To=%3C47ED6601.50...%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="002306.html">
   <LINK REL="Next"  HREF="002326.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>fnext followed by fbreak</H1>
    <B>Andrei Polushin</B> 
    <A HREF="mailto:ragel-users%40colm.net?Subject=Re%3A%20fnext%20followed%20by%20fbreak&In-Reply-To=%3C47ED6601.50...%40gmail.com%3E"
       TITLE="fnext followed by fbreak">polus... at gmail.com
       </A><BR>
    <I>Fri Mar 28 21:41:21 UTC 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="002306.html">[ragel-users] Re: Is there a way to generate non-static variables?
</A></li>
        <LI>Next message: <A HREF="002326.html">[ragel-users] fnext followed by fbreak
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#562">[ date ]</a>
              <a href="thread.html#562">[ thread ]</a>
              <a href="subject.html#562">[ subject ]</a>
              <a href="author.html#562">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The action like this:

     action x {
         fnext somewhere_else;
         fbreak;
     };

become generated as follows:

     action x {
         cs = 123;                   // fnext somewhere_else;
         {p++; cs = 456; goto _out;} // fbreak;
     };

where '123' is the desired next state (aka somewhere_else),
and '456' is the default target state for the transition.

That is, the effect of fnext is neglected, when followed by fbreak.

For now, the workaround is to redeclare 'cs' in local block:

     action x {
         fnext somewhere_else;
         {int cs = -1; fbreak;}
     };

but I hope there should be a better solution for this.

For actions that involve both fnext and fbreak, I would suggest
generating {cs = ...} in the beginning of the action, and omit
that assignnment in the code generated by fbreak.

--
Andrei Polushin

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002306.html">[ragel-users] Re: Is there a way to generate non-static variables?
</A></li>
	<LI>Next message: <A HREF="002326.html">[ragel-users] fnext followed by fbreak
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#562">[ date ]</a>
              <a href="thread.html#562">[ thread ]</a>
              <a href="subject.html#562">[ subject ]</a>
              <a href="author.html#562">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.colm.net/cgi-bin/mailman/listinfo/ragel-users">More information about the ragel-users
mailing list</a><br>
</body></html>
