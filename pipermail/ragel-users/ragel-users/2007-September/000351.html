<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ragel-users] Re: Problem with long alphabet type
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:ragel%40colm.net?Subject=Re%3A%20%5Bragel-users%5D%20Re%3A%20Problem%20with%20long%20alphabet%20type&In-Reply-To=%3C915713817-1189709181-cardhu_decombobulator_blackberry.rim.net-1909415055-%40bxe033.bisx.prod.on.blackberry%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="000349.html">
   <LINK REL="Next"  HREF="000352.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ragel-users] Re: Problem with long alphabet type</H1>
    <B>Adrian Thurston</B> 
    <A HREF="mailto:ragel%40colm.net?Subject=Re%3A%20%5Bragel-users%5D%20Re%3A%20Problem%20with%20long%20alphabet%20type&In-Reply-To=%3C915713817-1189709181-cardhu_decombobulator_blackberry.rim.net-1909415055-%40bxe033.bisx.prod.on.blackberry%3E"
       TITLE="[ragel-users] Re: Problem with long alphabet type">thurs... at cs.queensu.ca
       </A><BR>
    <I>Thu Sep 13 18:46:19 UTC 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000349.html">Problem with long alphabet type
</A></li>
        <LI>Next message: <A HREF="000352.html">[ragel-users] Re: Problem with long alphabet type
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#351">[ date ]</a>
              <a href="thread.html#351">[ thread ]</a>
              <a href="subject.html#351">[ subject ]</a>
              <a href="author.html#351">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi I just committed the necessary changes. 

Could you post the code which causes rlgen-cd to crash?

There is a data structure in common.h called key which encapsulates the character type. The core of ragel uses this structure heavily so the interface to it can't really change, but the type inside it can. I once changed this to long long to get a bigger key but ragel slowed down considerably. Maybe a good bignum library would work well. But we also need to consider how the backend changes in response to a larger key type. Also, the abstraction may be bypassed at times. I would need to audit the code. 

Adrian

-----Original Message-----
From: Elmin &lt;<A HREF="http://www.colm.net/cgi-bin/mailman/listinfo/ragel">matty.noble at gmail.com</A>&gt;

Date: Thu, 13 Sep 2007 10:49:31 
To:ragel-users &lt;<A HREF="http://www.colm.net/cgi-bin/mailman/listinfo/ragel">ragel-users at googlegroups.com</A>&gt;
Subject: [ragel-users] Re: Problem with long alphabet type



Thanks for the quick answer!  I just compiled the newest version of
the documentation and I didn't see anything about the long alphabet
type in the section about semantic conditions.  Also, when I try to
build a more complex machine, rlgen-cd crashes using the default code
style -- strangely, it works with the goto style, but then the output
is incorrect.

I'd really appreciate this feature, since it would make it a lot
easier to write scanners for Unicode-aware languages.  With the
current tools, I pretty much have two options:

1) Pretend Unicode is 16-bit, and risk offending those unfortunate
ancient greeks who want to use musical notation in their identifiers,
or

2) Write the machine to deal with encoded streams (e.g. UTF-8) and
hope that I never have to support multiple encodings.

It occurs to me that since Unicode doesn't (for now) take up the full
32-bit range, there might be an application for a kind of
&quot;intermediate&quot; alphabet type between short and long -- that way the
storage could still be long, and characters could be allocated in the
range 0x10FFFF..0x8FFFFFFF or something.  Does that sound like it
might work?

On Sep 13, 8:30 am, &quot;Carlos Antunes&quot; &lt;<A HREF="http://www.colm.net/cgi-bin/mailman/listinfo/ragel">cmantu... at gmail.com</A>&gt; wrote:
&gt;<i> On 9/13/07, Adrian Thurston &lt;<A HREF="http://www.colm.net/cgi-bin/mailman/listinfo/ragel">thurs... at cs.queensu.ca</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; The semantic condition feature requires that Ragel be able to allocate
</I>&gt;<i> &gt; characters from the alphabet space. Ragel uses these allocated
</I>&gt;<i> &gt; characters to express &quot;character c with cond1 true&quot; or &quot;c with cond1
</I>&gt;<i> &gt; false.&quot; But internally Ragel uses longs to store characters and so if
</I>&gt;<i> &gt; your alphabet type is long there is no more room left in the alphabet
</I>&gt;<i> &gt; space to allocate from.
</I>&gt;<i>
</I>&gt;<i> Maybe ragel6 &quot;needs&quot; to work with structs as a datatype instead? Maybe
</I>&gt;<i> have a switch to turn on/off the use of longs/structs? Just a
</I>&gt;<i> tought...
</I>



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000349.html">Problem with long alphabet type
</A></li>
	<LI>Next message: <A HREF="000352.html">[ragel-users] Re: Problem with long alphabet type
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#351">[ date ]</a>
              <a href="thread.html#351">[ thread ]</a>
              <a href="subject.html#351">[ subject ]</a>
              <a href="author.html#351">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.colm.net/cgi-bin/mailman/listinfo/ragel">More information about the ragel
mailing list</a><br>
</body></html>
