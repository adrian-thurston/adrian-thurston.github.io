<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ragel-users] Maintaining char &amp; line counts in a scanner
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:ragel-users%40colm.net?Subject=Re%3A%20%5Bragel-users%5D%20Maintaining%20char%20%26%20line%20counts%20in%20a%20scanner&In-Reply-To=%3C60716CE1-81D9-48A2-AD94-26025AC7176C%40elusive.cx%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="002874.html">
   <LINK REL="Next"  HREF="002876.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ragel-users] Maintaining char &amp; line counts in a scanner</H1>
    <B>Joe Wildish</B> 
    <A HREF="mailto:ragel-users%40colm.net?Subject=Re%3A%20%5Bragel-users%5D%20Maintaining%20char%20%26%20line%20counts%20in%20a%20scanner&In-Reply-To=%3C60716CE1-81D9-48A2-AD94-26025AC7176C%40elusive.cx%3E"
       TITLE="[ragel-users] Maintaining char &amp; line counts in a scanner">joe at elusive.cx
       </A><BR>
    <I>Wed Apr 21 22:44:49 UTC 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="002874.html">[ragel-users] pronounciation
</A></li>
        <LI>Next message: <A HREF="002876.html">[ragel-users] Maintaining char &amp; line counts in a scanner
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2875">[ date ]</a>
              <a href="thread.html#2875">[ thread ]</a>
              <a href="subject.html#2875">[ subject ]</a>
              <a href="author.html#2875">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All,

I'm using ragel as a scanner to tokenise input for parsing of a database query language. I'd like to maintain a line number and character offset in the struct that represents a matched token but I'm having a little difficulty.

My question is this: Is it possible to define a match for a expression (e.g. a newline), but to have that expression match NOT consume the input, and instead pass the input on to other expressions? At the same time, the original expression would execute a user action.

My idea would be to have two expressions - one that matches a newline and one that matches any other character. Clearly there would be an associated action with these expressions to maintain variables for the line and char count. Currently I have various expressions, some of which can potentially match multiple newlines (think multi-line comments), and some of which consume dead input (whitespace). I have played around keeping a tally of the counts on each successful match of a token (outside of the machine exex), but as in some cases I am discarding input completely within the state machine and not creating a token, it becomes difficult to track.... ideally, I'd like to keep it all within the machine, but can't see the best way to proceed.

Any help or pointers would be much appreciated.

Cheers,
-Joe
_______________________________________________
ragel-users mailing list
<A HREF="http://www.colm.net/cgi-bin/mailman/listinfo/ragel-users">ragel-users at complang.org</A>
<A HREF="http://www.complang.org/mailman/listinfo/ragel-users">http://www.complang.org/mailman/listinfo/ragel-users</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002874.html">[ragel-users] pronounciation
</A></li>
	<LI>Next message: <A HREF="002876.html">[ragel-users] Maintaining char &amp; line counts in a scanner
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2875">[ date ]</a>
              <a href="thread.html#2875">[ thread ]</a>
              <a href="subject.html#2875">[ subject ]</a>
              <a href="author.html#2875">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.colm.net/cgi-bin/mailman/listinfo/ragel-users">More information about the ragel-users
mailing list</a><br>
</body></html>
