<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ragel-users] Best practice: using ragel for bit-based state machines on	microcontroller?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:ragel-users%40colm.net?Subject=Re%3A%20%5Bragel-users%5D%20Best%20practice%3A%20using%20ragel%20for%20bit-based%20state%0A%20machines%20on%09microcontroller%3F&In-Reply-To=%3C4A0CD56B.4090807%40complang.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="002705.html">
   <LINK REL="Next"  HREF="002707.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ragel-users] Best practice: using ragel for bit-based state machines on	microcontroller?</H1>
    <B>Adrian Thurston</B> 
    <A HREF="mailto:ragel-users%40colm.net?Subject=Re%3A%20%5Bragel-users%5D%20Best%20practice%3A%20using%20ragel%20for%20bit-based%20state%0A%20machines%20on%09microcontroller%3F&In-Reply-To=%3C4A0CD56B.4090807%40complang.org%3E"
       TITLE="[ragel-users] Best practice: using ragel for bit-based state machines on	microcontroller?">thurston at complang.org
       </A><BR>
    <I>Fri May 15 02:37:31 UTC 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002705.html">[ragel-users] How easy is it to extend Ragel's code generation to	other targets?
</A></li>
        <LI>Next message: <A HREF="002707.html">[ragel-users] Best practice: using ragel for bit-based state machines on	microcontroller?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2706">[ date ]</a>
              <a href="thread.html#2706">[ thread ]</a>
              <a href="subject.html#2706">[ subject ]</a>
              <a href="author.html#2706">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I wish I had some tips for you. I have no experience using Ragel for 
bit-based parsers. I know it's pretty easy to mask out high bits using 
ranges

alphtype unsigned char;
foo = 0xfc .. 0xff;

But masking out low bit patterns is not pleasant because the values are 
not contiguous.

Also, once you mask out some bits, you just move over the others in the 
byte. I suppose you could use fhold strategically. Seems painful to me 
though.

-Adrian

Jan Sporbeck wrote:
&gt;<i> Hello there!
</I>&gt;<i> 
</I>&gt;<i> I'd like to use ragel to design the state machine for a microcontroller
</I>&gt;<i> project (avr atmega8535) written in C.
</I>&gt;<i> 
</I>&gt;<i> I think I understand how to use it for streams of char, int, etc. But
</I>&gt;<i> what's the best practice to use for bit based decisions?
</I>&gt;<i> 
</I>&gt;<i> I could use union..struct to pack all bits in one datatype and process
</I>&gt;<i> that. But I doubt that'll yield a performant implementation.
</I>&gt;<i> 
</I>&gt;<i> I read messages on this list that ragel is used for uC projects, but no
</I>&gt;<i> details how.
</I>&gt;<i> 
</I>&gt;<i> So any hints or example code to get me started is appreciated.
</I>&gt;<i> 
</I>&gt;<i> Thanks in advance,
</I>&gt;<i> /Jan.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> ragel-users mailing list
</I>&gt;<i> <A HREF="http://www.colm.net/cgi-bin/mailman/listinfo/ragel-users">ragel-users at complang.org</A>
</I>&gt;<i> <A HREF="http://www.complang.org/mailman/listinfo/ragel-users">http://www.complang.org/mailman/listinfo/ragel-users</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002705.html">[ragel-users] How easy is it to extend Ragel's code generation to	other targets?
</A></li>
	<LI>Next message: <A HREF="002707.html">[ragel-users] Best practice: using ragel for bit-based state machines on	microcontroller?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2706">[ date ]</a>
              <a href="thread.html#2706">[ thread ]</a>
              <a href="subject.html#2706">[ subject ]</a>
              <a href="author.html#2706">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.colm.net/cgi-bin/mailman/listinfo/ragel-users">More information about the ragel-users
mailing list</a><br>
</body></html>
