<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [ragel-users] Re: Simple URL parser
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:ragel%40colm.net?Subject=Re%3A%20%5Bragel-users%5D%20Re%3A%20Simple%20URL%20parser&In-Reply-To=%3C48370BC5.7040806%40cs.queensu.ca%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="000623.html">
   <LINK REL="Next"  HREF="000622.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[ragel-users] Re: Simple URL parser</H1>
    <B>Adrian Thurston</B> 
    <A HREF="mailto:ragel%40colm.net?Subject=Re%3A%20%5Bragel-users%5D%20Re%3A%20Simple%20URL%20parser&In-Reply-To=%3C48370BC5.7040806%40cs.queensu.ca%3E"
       TITLE="[ragel-users] Re: Simple URL parser">thurs... at cs.queensu.ca
       </A><BR>
    <I>Fri May 23 18:24:05 UTC 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000623.html">[ragel-users] Simple URL parser
</A></li>
        <LI>Next message: <A HREF="000622.html">[ragel-users] Simple URL parser
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#624">[ date ]</a>
              <a href="thread.html#624">[ thread ]</a>
              <a href="subject.html#624">[ subject ]</a>
              <a href="author.html#624">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hey

hsanson wrote:
&gt;<i> 1 - If you see my code (attached) you will see I parse the scheme, 
</I>&gt;<i> hostname, port and path parts of the URL using almost identical
</I>&gt;<i>      actions. The only difference is the variables used to store the 
</I>&gt;<i> parsed strings. Is there a way to pass the actions some variables?
</I>&gt;<i>      So I can create a single function and pass the variable to store as 
</I>&gt;<i> a parameter?
</I>
Not currently, this is the single most requested feature for Ragel and
I'm hoping to do something about it soon.

&gt;<i> 2 - For some reason the last parsing never finishes. If I pass an URL 
</I>&gt;<i> like &quot;<A HREF="http://hostname">http://hostname</A>&quot; the parser gives me the scheme &quot;http&quot; but
</I>&gt;<i>      not the hostname. If I pass an URL like &quot;<A HREF="http://hostname:8080">http://hostname:8080</A>&quot; the 
</I>&gt;<i> parser outputs the scheme and hostname but not the port. And if
</I>&gt;<i>      I provide a path like &quot;<A HREF="http://hostname:8080/file.html">http://hostname:8080/file.html</A>&quot; the parser 
</I>&gt;<i> gives me all except for the path. As you see the last string never get's
</I>&gt;<i>      parsed and I don't know why??.
</I>
If you're using 5.X (which you seem to be) then you should do one of the
following:

1. Also embed the *_write actions as EOF actions and add a &quot;write eof&quot;
following all the processing.

2. Send an additional character (such as 0) after the url.

If you're using 6.X then just add &quot;char *eof = pe;&quot; after the
declarations of p and pe.

&gt;<i> 3 - Is there a better/cleaner way to do this??
</I>
Looks good to me. One thing to be aware of is that RFCs are sometimes
ambiguous so if you work directly from them you sometimes run into
problems. See chapter four of the manual for more info on resolving
ambiguities.

-Adrian

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000623.html">[ragel-users] Simple URL parser
</A></li>
	<LI>Next message: <A HREF="000622.html">[ragel-users] Simple URL parser
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#624">[ date ]</a>
              <a href="thread.html#624">[ thread ]</a>
              <a href="subject.html#624">[ subject ]</a>
              <a href="author.html#624">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.colm.net/cgi-bin/mailman/listinfo/ragel">More information about the ragel
mailing list</a><br>
</body></html>
