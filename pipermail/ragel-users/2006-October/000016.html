<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> speed vs. re2c?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:ragel%40colm.net?Subject=Re%3A%20speed%20vs.%20re2c%3F&In-Reply-To=%3C4525A747.4040205%40cs.queensu.ca%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="000015.html">
   <LINK REL="Next"  HREF="000017.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>speed vs. re2c?</H1>
    <B>Adrian Thurston</B> 
    <A HREF="mailto:ragel%40colm.net?Subject=Re%3A%20speed%20vs.%20re2c%3F&In-Reply-To=%3C4525A747.4040205%40cs.queensu.ca%3E"
       TITLE="speed vs. re2c?">thurs... at cs.queensu.ca
       </A><BR>
    <I>Fri Oct  6 00:45:59 UTC 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000015.html">speed vs. re2c?
</A></li>
        <LI>Next message: <A HREF="000017.html">speed vs. re2c?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16">[ date ]</a>
              <a href="thread.html#16">[ thread ]</a>
              <a href="subject.html#16">[ subject ]</a>
              <a href="author.html#16">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Joshua,

If I understand you right, then you'll be pleased to know that Ragel is 
already one half of this. You can use it to make parsers which parse an 
entire file in one shot, executing actions (or callbacks, or hooks) along 
the way. See the Mongrel HTTP Server for an example.

<A HREF="http://mongrel.rubyforge.org/">http://mongrel.rubyforge.org/</A>

The half that Ragel isn't is JIT. I need some clarification though: by JIT 
regex compiling do you mean only synthesize a state when it is needed? This 
is the only way I can see a possible benefit of doing JIT regex compiling. 
If not, then exactly what part of the process do you envision to be done at 
compile time?

Cheers,
  Adrian

Joshua Haberman wrote:
&gt;<i> Cool -- I'm glad to know it's competetive with re2c.  When I went to
</I>&gt;<i> look up what '-G' does, I was also happy to see that there are lots of
</I>&gt;<i> options for how the code is generated.
</I>&gt;<i> 
</I>&gt;<i> Let me explain why I was interested in re2c, and why I'm now interested
</I>&gt;<i> in Ragel.  Many people I've talked to think this idea is crap, so I
</I>&gt;<i> won't be offended if you do too, but I really believe in it.
</I>&gt;<i> 
</I>&gt;<i> Text processing is one of the most common bottlenecks in high-level
</I>&gt;<i> languages.  The regular expression engines that are built into
</I>&gt;<i> languages like Perl, Ruby, Python, etc. are useful for pattern matching
</I>&gt;<i> on isolated strings, but aren't optimal for the case where you want to
</I>&gt;<i> want to parse a file in a known format, beginning to end.  If you
</I>&gt;<i> designed a library specifically for this use case, you could get lots
</I>&gt;<i> of nice benefits like:
</I>&gt;<i> 
</I>&gt;<i> * its API could be more along the lines of what you want: set up a
</I>&gt;<i> bunch of patterns and rules, then set the library in motion on an input
</I>&gt;<i> stream.
</I>&gt;<i> 
</I>&gt;<i> * you could write an optimized buffering layer that keeps a
</I>&gt;<i> configurable number of trailing tokens in memory at once.
</I>&gt;<i> 
</I>&gt;<i> * you could use a library like Ragel to generate goto-based scanners at
</I>&gt;<i> runtime, so that you could get the performance improvements over the
</I>&gt;<i> table-based scanners that existing regex engines use.  Basically I am
</I>&gt;<i> proposing use Ragel as the backend for a regex JIT.
</I>&gt;<i> 
</I>&gt;<i> You could compile to C and then use an embedded C compiler (like
</I>&gt;<i> libtcc) to compile to machine code.  Personally I would be more
</I>&gt;<i> interested in generating assembly code directly, since it wouldn't be
</I>&gt;<i> as heavyweight a process and would give you the opportunity to optimize
</I>&gt;<i> better than the C compiler, since you are working within a very narrow
</I>&gt;<i> problem domain.
</I>&gt;<i> 
</I>&gt;<i> I don't know when I'd actually get to this, but I'm very interested in
</I>&gt;<i> seeing it done, and will probably try to use Ragel in this way at some
</I>&gt;<i> point.  What do you think?
</I>&gt;<i> 
</I>&gt;<i> Josh
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000015.html">speed vs. re2c?
</A></li>
	<LI>Next message: <A HREF="000017.html">speed vs. re2c?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#16">[ date ]</a>
              <a href="thread.html#16">[ thread ]</a>
              <a href="subject.html#16">[ subject ]</a>
              <a href="author.html#16">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.colm.net/cgi-bin/mailman/listinfo/ragel">More information about the ragel
mailing list</a><br>
</body></html>
