<tt>
&lt;div&gt; &lt;/div&gt;&lt;div&gt;All,&nbsp;help.&nbsp;I&#39;ve&nbsp;R&#39;d&nbsp;TFM&nbsp;all&nbsp;week&nbsp;trying&nbsp;to&nbsp;figure&nbsp;this&nbsp;out,&nbsp;but&nbsp;am&nbsp;still&nbsp;confused&nbsp;(so&nbsp;please&nbsp;pardon&nbsp;the&nbsp;potential&nbsp;n00bness.)&nbsp;&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt;I&nbsp;have&nbsp;to&nbsp;parse&nbsp;a&nbsp;config&nbsp;file&nbsp;for&nbsp;an&nbsp;app&nbsp;I&#39;m&nbsp;working&nbsp;on,&nbsp;whose&nbsp;format&nbsp;is&nbsp;basically&nbsp;of&nbsp;the&nbsp;format:&lt;/div&gt;<br>
&lt;div&gt;group&nbsp;MyGroup&nbsp;{&lt;/div&gt;&lt;div&gt; &nbsp;tcpclient(&nbsp;host:&nbsp;foo,&nbsp;port:&nbsp;49152&nbsp;);&lt;/div&gt;&lt;div&gt; &nbsp;udp(&nbsp;host:&nbsp;bar,&nbsp;port:&nbsp;49152&nbsp;) &gt;&nbsp;tcpserver(&nbsp;port:&nbsp;11111&nbsp;);&lt;/div&gt;&lt;div&gt; &nbsp;udp:foo:49152.nonblocking&nbsp;=&nbsp;true;&lt;/div&gt;&lt;div&gt;}&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt;<br>
&gt;From&nbsp;what&nbsp;I&#39;ve&nbsp;read&nbsp;on&nbsp;the&nbsp;Intertubes,&nbsp;it&nbsp;seems&nbsp;that&nbsp;the&nbsp;SOP&nbsp;for&nbsp;processing&nbsp;this&nbsp;is&nbsp;to&nbsp;define&nbsp;a&nbsp;main&nbsp;:=&nbsp;which&nbsp;will&nbsp;match&nbsp;a&nbsp;particular&nbsp;line&nbsp;of&nbsp;the&nbsp;text&nbsp;and&nbsp;then&nbsp;upon&nbsp;matching&nbsp;call&nbsp;a&nbsp;another&nbsp;machine&nbsp;to&nbsp;&quot;scan&quot;&nbsp;the&nbsp;message.&nbsp;However,&nbsp;I&#39;m&nbsp;not&nbsp;sure&nbsp;how&nbsp;to&nbsp;do&nbsp;that&nbsp;because&nbsp;it&nbsp;seem&nbsp;that&nbsp;regardless&nbsp;of&nbsp;whether&nbsp;I&nbsp;define&nbsp;main&nbsp;as&nbsp;a&nbsp;matcher&nbsp;or&nbsp;a&nbsp;scanner,&nbsp;executing&nbsp;the&nbsp;parser&nbsp;always&nbsp;seems&nbsp;to&nbsp;consume&nbsp;the&nbsp;text&nbsp;as&nbsp;it&nbsp;matches.&nbsp;For&nbsp;instance,&nbsp;when&nbsp;I&nbsp;parse&nbsp;the&nbsp;group&nbsp;definition,&nbsp;I&nbsp;can&nbsp;simply&nbsp;match&nbsp;on&nbsp;the&nbsp;word&nbsp;&quot;group&quot;&nbsp;and&nbsp;then&nbsp;pass&nbsp;the&nbsp;rest&nbsp;of&nbsp;the&nbsp;line&nbsp;(up&nbsp;to&nbsp;the&nbsp;{)&nbsp;in&nbsp;to&nbsp;the&nbsp;scanner&nbsp;and&nbsp;I&nbsp;can&nbsp;get&nbsp;&#39;MyGroup&#39;&nbsp;out&nbsp;relatively&nbsp;easily.&nbsp;However,&nbsp;when&nbsp;I&nbsp;try&nbsp;to&nbsp;parse&nbsp;the&nbsp;first&nbsp;encapsulated&nbsp;line,&nbsp;I&nbsp;don&#39;t&nbsp;know&nbsp;whether&nbsp;I&#39;m&nbsp;dealing&nbsp;with&nbsp;a&nbsp;string&nbsp;of&nbsp;the&nbsp;first&nbsp;line&nbsp;form&nbsp;or&nbsp;third&nbsp;line&nbsp;form&nbsp;(or&nbsp;if&nbsp;the&nbsp;command&nbsp;is&nbsp;&quot;chained&quot;&nbsp;as&nbsp;in&nbsp;the&nbsp;second&nbsp;line)&nbsp;until&nbsp;I&#39;ve&nbsp;done&nbsp;a&nbsp;kleene&nbsp;star&nbsp;match&nbsp;of&nbsp;the&nbsp;entire&nbsp;line&nbsp;(up&nbsp;to&nbsp;the&nbsp;;)&nbsp;at&nbsp;which&nbsp;point&nbsp;it&nbsp;seems&nbsp;that&nbsp;the&nbsp;parser&nbsp;has&nbsp;already&nbsp;consumed&nbsp;the&nbsp;entire&nbsp;line&nbsp;and&nbsp;when&nbsp;I&nbsp;pass&nbsp;it&nbsp;into&nbsp;a&nbsp;scanner&nbsp;the&nbsp;pointers&nbsp;are&nbsp;already&nbsp;at&nbsp;the&nbsp;next&nbsp;line.&nbsp;Do&nbsp;I&nbsp;need&nbsp;the&nbsp;store&nbsp;the&nbsp;starting&nbsp;pointer&nbsp;before&nbsp;the&nbsp;first&nbsp;main&nbsp;scan&nbsp;(and&nbsp;if&nbsp;so,&nbsp;how?)&nbsp;and&nbsp;then&nbsp;how&nbsp;would&nbsp;I&nbsp;tell&nbsp;the&nbsp;downstream&nbsp;scanner&nbsp;where&nbsp;to&nbsp;start?&nbsp;I&nbsp;thought&nbsp;of&nbsp;making&nbsp;a&nbsp;number&nbsp;of&nbsp;nested&nbsp;c++&nbsp;&quot;parser&nbsp;objects&quot;&nbsp;but&nbsp;that&nbsp;just&nbsp;seem&nbsp;inherently&nbsp;wrong.&lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;&lt;div&gt;Below&nbsp;is&nbsp;what&nbsp;I&#39;ve&nbsp;written&nbsp;so&nbsp;far--just&nbsp;enough&nbsp;to&nbsp;hopefully&nbsp;pass&nbsp;the&nbsp;first&nbsp;two&nbsp;cases.&nbsp;Again,&nbsp;I&nbsp;don&#39;t&nbsp;know&nbsp;if&nbsp;I&#39;m&nbsp;only&nbsp;a&nbsp;character&nbsp;or&nbsp;so&nbsp;off&nbsp;or&nbsp;if&nbsp;my&nbsp;mindset&nbsp;is&nbsp;completely&nbsp;off.&nbsp;Any&nbsp;help&nbsp;would&nbsp;be&nbsp;appreciated.&lt;/div&gt;<br>
&lt;div&gt; &lt;/div&gt;&lt;div&gt;--&lt;br&nbsp;clear=&quot;all&quot;&gt;Rob&nbsp;Harris&lt;br&gt; &nbsp;Technological&nbsp;Pragmatist&lt;br&gt; &nbsp;rob&nbsp;period&nbsp;harris&nbsp;shift-2&nbsp;gmail&nbsp;decimal-point&nbsp;com&lt;br&gt; &nbsp;&quot;The&nbsp;universe&nbsp;tends&nbsp;towards&nbsp;maximum&nbsp;irony.&quot;&nbsp;--Jamie&nbsp;Zawinsky&lt;br&gt;<br>
&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,monospace&quot;&gt; %%{&nbsp;&lt;br&gt;   &nbsp;machine&nbsp;sas_scanner;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,monospace&quot;&gt;   &nbsp;ml_comment&nbsp;=&nbsp;&#39;/*&#39;&nbsp;(&nbsp;any&nbsp;)*&nbsp;:&gt;&gt;&nbsp;&#39;*/&#39;;&lt;br&gt;   &nbsp;sl_comment&nbsp;=&nbsp;&#39;//&#39;&nbsp;[^\n]*&nbsp;&#39;\n&#39;;&lt;br&gt;<br>
   &nbsp;comment   &nbsp;=&nbsp;ml_comment&nbsp;|&nbsp;sl_comment;&lt;br&gt;   &nbsp;wspace    &nbsp;=&nbsp;comment&nbsp;|&nbsp;space+&nbsp;;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,monospace&quot;&gt;   &nbsp;integer   &nbsp;=&nbsp;[0-9]*;&lt;br&gt;   &nbsp;float     &nbsp;=&nbsp;[0-9]*&nbsp;&#39;.&#39;&nbsp;[0-9]*;&lt;br&gt;   &nbsp;identifier&nbsp;=&nbsp;[a-zA-Z][a-zA-Z0-9]*;&lt;br&gt;<br>
   &nbsp;fqsm      &nbsp;=&nbsp;[a-zA-Z]&nbsp;(&nbsp;[a-zA-Z0-9:][a-zA-Z0-9_]&nbsp;)*;&nbsp;&lt;br&gt;   &nbsp;sqstring  &nbsp;=&nbsp;&#39;\&#39;&#39;&nbsp;[^\n]*&nbsp;:&gt;&gt;&nbsp;&#39;\&#39;&#39;;&lt;br&gt;   &nbsp;dqstring  &nbsp;=&nbsp;&#39;\&quot;&#39;&nbsp;[^\n]*&nbsp;:&gt;&gt;&nbsp;&#39;\&quot;&#39;;&lt;br&gt;   &nbsp;strvalue  &nbsp;=&nbsp;(&nbsp;integer&nbsp;|&nbsp;float&nbsp;|&nbsp;identifier&nbsp;|&nbsp;sqstring&nbsp;|&nbsp;dqstring&nbsp;);&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,monospace&quot;&gt;   &nbsp;action&nbsp;DEBUG&nbsp;{&nbsp;fprintf(&nbsp;stderr,&nbsp;&quot;state:&nbsp;%4d,&nbsp;char:&nbsp;%c\n&quot;,&nbsp;cs,&nbsp;*p&nbsp;);&nbsp;}&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,monospace&quot;&gt;   &nbsp;action&nbsp;RESET&nbsp;{&nbsp;reset();&nbsp;}&lt;br&gt;   &nbsp;action&nbsp;CRLF &nbsp;{&nbsp;std::cout&nbsp;&lt;&lt;&nbsp;std::endl&nbsp;&lt;&lt;&nbsp;std::endl;&nbsp;}&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,monospace&quot;&gt;   &nbsp;action&nbsp;NAME &nbsp;{&nbsp;m_name.append(&nbsp;1,&nbsp;fc&nbsp;);&nbsp;}&lt;br&gt;   &nbsp;action&nbsp;KEY  &nbsp;{ &nbsp;m_key.append(&nbsp;1,&nbsp;fc&nbsp;);&nbsp;}&lt;br&gt;   &nbsp;action&nbsp;VAL  &nbsp;{ &nbsp;m_val.append(&nbsp;1,&nbsp;fc&nbsp;);&nbsp;}&lt;br&gt;   &nbsp;action&nbsp;QKV&nbsp;&lt;br&gt;   &nbsp;{  &nbsp;&lt;br&gt;     &nbsp;printf(&nbsp;&quot;[%s]=&gt;[%s]\n&quot;,&nbsp;m_key.c_str(),&nbsp;m_val.c_str());&lt;br&gt;<br>
     &nbsp;m_kvMap[&nbsp;m_key&nbsp;]&nbsp;=&nbsp;m_val;&lt;br&gt;     &nbsp;m_key.clear();&lt;br&gt;     &nbsp;m_val.clear();&lt;br&gt;   &nbsp;}  &nbsp;&lt;br&gt;   &nbsp;action&nbsp;SNAME&nbsp;{&nbsp;printf(&nbsp;&quot;NAME:&nbsp;[%s]\n&quot;,&nbsp;m_name.c_str()&nbsp;);&nbsp;}&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,monospace&quot;&gt;   &nbsp;kvpair&nbsp;=&nbsp;(&nbsp;identifier&nbsp;space*&nbsp;&#39;:&#39;&nbsp;space*&nbsp;strvalue&nbsp;);&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,monospace&quot;&gt;   &nbsp;kvlist&nbsp;=&nbsp;(&nbsp;space+&nbsp;|&nbsp;kvpair&nbsp;|&nbsp;&#39;,&#39;&nbsp;space+&nbsp;kvpair&nbsp;);&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,monospace&quot;&gt;   &nbsp;instantiation&nbsp;=&nbsp;(&nbsp;identifier&nbsp;&#39;(&#39;&nbsp;kvlist*&nbsp;&#39;)&#39;&nbsp;);&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,monospace&quot;&gt;&lt;/font&gt; &lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,monospace&quot;&gt;   &nbsp;instantiation_chain&nbsp;=&nbsp;(&nbsp;&lt;br&gt;     &nbsp;instantiation&nbsp;$NAME&nbsp;(&nbsp;space*&nbsp;&#39;&gt;&#39;&nbsp;space*&nbsp;instantiation&nbsp;)*&lt;br&gt;     &nbsp;)&nbsp;$NAME&nbsp;&gt;RESET&nbsp;&#39;;&#39;&nbsp;@SNAME;&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,monospace&quot;&gt;&lt;/font&gt; &lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,monospace&quot;&gt;   &nbsp;inst_chain_scanner&nbsp;:=&lt;br&gt;   &nbsp;|* &nbsp;&lt;br&gt;     &nbsp;space+;&lt;br&gt;     &nbsp;identifier&nbsp;=&gt;&nbsp;{&nbsp;diff();&nbsp;};&lt;br&gt;     &nbsp;strvalue&nbsp;=&gt;&nbsp;{&nbsp;diff();&nbsp;};&lt;br&gt;<br>
   &nbsp;*|;&nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,monospace&quot;&gt;&lt;/font&gt; &lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,monospace&quot;&gt;   &nbsp;group_name&nbsp;=&nbsp;(&nbsp;&#39;g&#39;&nbsp;&#39;r&#39;&nbsp;&#39;o&#39;&nbsp;&#39;u&#39;&nbsp;&#39;p&#39;&nbsp;);&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,monospace&quot;&gt;   &nbsp;group_id&nbsp;=&nbsp;(&nbsp;identifier&nbsp;-&nbsp;group_name&nbsp;)&nbsp;@NAME;&lt;/font&gt;&lt;/div&gt;<br>
&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,monospace&quot;&gt;   &nbsp;group_line&nbsp;=&nbsp;(&nbsp;group_name&nbsp;space+&nbsp;group_id&nbsp;:&gt;&gt;&nbsp;space*&nbsp;&#39;{&#39;&nbsp;);&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;Courier&nbsp;New&quot;&gt;&lt;/font&gt; &lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,monospace&quot;&gt;   &nbsp;group_scanner&nbsp;:=&lt;br&gt;<br>
   &nbsp;|* &nbsp;&lt;br&gt;     &nbsp;space+&nbsp;=&gt;&nbsp;{&nbsp;m_name.clear();&nbsp;};&lt;br&gt;     &nbsp;group_name;&lt;br&gt;     &nbsp;group_id&nbsp;=&gt;&nbsp;{&nbsp;printf(&nbsp;&quot;&gt;&gt;&nbsp;%s\n&quot;,&nbsp;m_name.c_str()&nbsp;);&nbsp;};&lt;br&gt;     &nbsp;&#39;{&#39;&nbsp;=&gt;&nbsp;{&nbsp;fret;&nbsp;};&lt;br&gt;   &nbsp;*|;&nbsp;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;<br>
&lt;font&nbsp;face=&quot;Courier&nbsp;New&quot;&gt;&lt;/font&gt; &lt;/div&gt;&lt;div&gt;&lt;font&nbsp;face=&quot;courier&nbsp;new,monospace&quot;&gt;   &nbsp;main&nbsp;:=&lt;br&gt;   &nbsp;|* &nbsp;&lt;br&gt;     &nbsp;wspace+;&lt;br&gt;     &nbsp;group_name&nbsp;=&gt;&nbsp;{&nbsp;fcall&nbsp;group_scanner;&nbsp;};&lt;br&gt;     &nbsp;instantiation_chain&nbsp;=&gt;&nbsp;{&nbsp;fcall&nbsp;inst_chain_scanner;&nbsp;};&lt;br&gt;<br>
   &nbsp;*|;&nbsp;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;<br>

</tt>
