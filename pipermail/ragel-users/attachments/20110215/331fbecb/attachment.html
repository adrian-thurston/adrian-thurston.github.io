<tt>
Hello&nbsp;guys,&lt;br&gt;&lt;br&gt;I&nbsp;try&nbsp;to&nbsp;use&nbsp;ragel&nbsp;in&nbsp;the&nbsp;open-source&nbsp;project&nbsp;&quot;Percona-Playback&quot;:&lt;br&gt;&lt;a&nbsp;href=&quot;https://code.launchpad.net/~tsarev/percona-playback/alpha&quot;&gt;https://code.launchpad.net/~tsarev/percona-playback/alpha&lt;/a&gt;&lt;br&gt;<br>
Ragel&nbsp;is&nbsp;great&nbsp;compliant&nbsp;to&nbsp;my&nbsp;targets.&lt;br&gt;&lt;br&gt;But&nbsp;I&nbsp;have&nbsp;trouble&nbsp;what&nbsp;can&#39;t&nbsp;solve&nbsp;and&nbsp;documentation&nbsp;not&nbsp;answer&nbsp;to&nbsp;my&nbsp;question.&lt;br&gt;So&nbsp;I&nbsp;read&nbsp;parts&nbsp;2.1.4,&nbsp;but&nbsp;don&#39;t&nbsp;understand&nbsp;how&nbsp;its&nbsp;work&lt;br&gt;&lt;br&gt;Suppose&nbsp;I&nbsp;have&nbsp;one&nbsp;machine&nbsp;(thread_id.rl&nbsp;file):&lt;br&gt;<br>
{{%&lt;br&gt;   &nbsp;machine&nbsp;thread_id;&lt;br&gt;   &nbsp;action&nbsp;thread_id_begin&nbsp;{&nbsp;thread_id=&nbsp;0;&nbsp;}&lt;br&gt;   &nbsp;action&nbsp;thread_id_step &nbsp;{&nbsp;thread_id=&nbsp;thread_id&nbsp;*&nbsp;10&nbsp;+&nbsp;(fc&nbsp;-&nbsp;&#39;0&#39;);&nbsp;}&lt;br&gt;   &nbsp;action&nbsp;thread_id_end  &nbsp;{&nbsp;set_thread_id(thread_id);&nbsp;}&lt;br&gt;<br>
   &nbsp;key  &nbsp;=&nbsp;&#39;Thread_id:&nbsp;&#39;;&lt;br&gt;   &nbsp;value&nbsp;=&nbsp;([0-9]&nbsp;@thread_id_step;)+&nbsp;%thread_id_end;&lt;br&gt;   &nbsp;main&nbsp;:=&nbsp;(key&nbsp;@thread_id_begin)&nbsp;.&nbsp;value;&lt;br&gt;%}}&lt;br&gt;&lt;br&gt;Now&nbsp;i&nbsp;want&nbsp;two&nbsp;things:&lt;br&gt;1)&nbsp;Write&nbsp;unit&nbsp;test&nbsp;to&nbsp;this&nbsp;machine&lt;br&gt;2)&nbsp;Use&nbsp;this&nbsp;machine&nbsp;to&nbsp;another,&nbsp;more&nbsp;complex&nbsp;machine.&lt;br&gt;<br>
&lt;br&gt;I&nbsp;tried&nbsp;to&nbsp;include&nbsp;this&nbsp;machine&nbsp;in&nbsp;another&nbsp;file:&lt;br&gt;%%{&lt;br&gt;   &nbsp;machine&nbsp;thread_id_test;&lt;br&gt;   &nbsp;error&nbsp;=&nbsp;[^\n]*&nbsp;&#39;\n&#39;&lt;br&gt;     &nbsp;&gt;{&nbsp;std::cout&nbsp;&lt;&lt;&nbsp;&quot;start&nbsp;skip:&nbsp;&#39;&quot;;&nbsp;}&lt;br&gt;     &nbsp;${&nbsp;std::cout&nbsp;&lt;&lt;&nbsp;fc;&nbsp;}&lt;br&gt;<br>
     &nbsp;@{&nbsp;std::cout&nbsp;&lt;&nbsp;&quot;&#39;\n&quot;&nbsp;&lt;&lt;&nbsp;std::flush;&nbsp;fgoto&nbsp;main;&nbsp;};&lt;br&gt;   &nbsp;thread_id=&nbsp;include&nbsp;thread_id&nbsp;&quot;../../src/parser/thread_id.rl&quot;;&lt;br&gt;   &nbsp;main&nbsp;:=&nbsp;(thread_id&nbsp;|&nbsp;error)*;&lt;br&gt;   &nbsp;write&nbsp;data;&lt;br&gt;}%%&lt;br&gt;<br>
&lt;br&gt;but&nbsp;receive&nbsp;error:&lt;br&gt;[&nbsp;69%]&nbsp;Generating&nbsp;thread_id_test.cc&lt;br&gt;/storage/project/playback/head/test/parser/thread_id_test.rl:39:10:&nbsp;at&nbsp;token&nbsp;TK_ColonEquals:&nbsp;parse&nbsp;error&lt;br&gt;&lt;br&gt;I&nbsp;tried&nbsp;another&nbsp;way:&lt;br&gt;%%{&lt;br&gt;   &nbsp;machine&nbsp;thread_id_test;&lt;br&gt;<br>
   &nbsp;include&nbsp;thread_id&nbsp;&quot;../../src/parser/thread_id.rl&quot;;&lt;br&gt;   &nbsp;error&nbsp;=&nbsp;[^\n]*&nbsp;&#39;\n&#39;&lt;br&gt;     &nbsp;&gt;{&nbsp;std::cout&nbsp;&lt;&lt;&nbsp;&quot;start&nbsp;skip:&nbsp;&#39;&quot;;&nbsp;}&lt;br&gt;     &nbsp;${&nbsp;std::cout&nbsp;&lt;&lt;&nbsp;fc;&nbsp;}&lt;br&gt;     &nbsp;@{&nbsp;std::cout&nbsp;&lt;&nbsp;&quot;&#39;\n&quot;&nbsp;&lt;&lt;&nbsp;std::flush;&nbsp;fgoto&nbsp;main;&nbsp;};&lt;br&gt;<br>
   &nbsp;main&nbsp;:=&nbsp;(thread_id&nbsp;|&nbsp;error)*;&lt;br&gt;   &nbsp;write&nbsp;data;&lt;br&gt;}%%&lt;br&gt;&lt;br&gt;but&nbsp;get&nbsp;another&nbsp;error:&lt;br&gt;[&nbsp;69%]&nbsp;Generating&nbsp;thread_id_test.cc&lt;br&gt;/storage/project/playback/head/test/parser/thread_id_test.rl:39:14:&nbsp;graph&nbsp;lookup&nbsp;of&nbsp;&quot;thread_id&quot;&nbsp;failed&lt;br&gt;<br>
&lt;br&gt;Thank&nbsp;you&nbsp;very&nbsp;much&nbsp;for&nbsp;any&nbsp;help.&lt;br&gt;&lt;br&gt;Best&nbsp;regards,&nbsp;Oleg&lt;br&gt;<br>

</tt>
