<tt>
&lt;html&gt;&lt;body&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-webkit-nbsp-mode:&nbsp;space;&nbsp;-webkit-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;Regarding&nbsp;my&nbsp;question&nbsp;about&nbsp;how&nbsp;to&nbsp;call&nbsp;different&nbsp;machines&nbsp;from&nbsp;the&nbsp;same&nbsp;file,&nbsp;I&nbsp;found&nbsp;a&nbsp;June&nbsp;7&nbsp;post&nbsp;on&nbsp;this&nbsp;list&nbsp;that&nbsp;answered&nbsp;my&nbsp;question.&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;arial;&nbsp;&quot;&gt;&lt;font&nbsp;face=&quot;Courier,&nbsp;Monospaced&quot;&nbsp;class=&quot;fixed_width&quot;&nbsp;style=&quot;font-family:&nbsp;fixed-width,&nbsp;monospace;&nbsp;font-size:&nbsp;100%;&nbsp;&quot;&gt;&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;arial;&nbsp;&quot;&gt;&lt;font&nbsp;face=&quot;Courier,&nbsp;Monospaced&quot;&nbsp;class=&quot;fixed_width&quot;&nbsp;style=&quot;font-family:&nbsp;fixed-width,&nbsp;monospace;&nbsp;font-size:&nbsp;100%;&nbsp;&quot;&gt;You&nbsp;can&nbsp;pick&nbsp;and&nbsp;choose&nbsp;which&nbsp;machine&nbsp;to&nbsp;start&nbsp;when&nbsp;exec&nbsp;is&nbsp;called&nbsp;by&nbsp;&lt;br&gt;setting&nbsp;the&nbsp;cs&nbsp;variable&nbsp;to&nbsp;[machine&nbsp;name]_en_[machine&nbsp;definition].&nbsp;&lt;br&gt;&lt;p&gt;e.g:&nbsp;&lt;br&gt;&lt;/p&gt;&lt;p&gt;int&nbsp;cs;&nbsp;&lt;br&gt;%%{&nbsp;&lt;br&gt;&nbsp;&nbsp;machine&nbsp;foo;&nbsp;&lt;br&gt;&nbsp;&nbsp;bar&nbsp;:=&nbsp;'bar';&nbsp;&lt;br&gt;&nbsp;&nbsp;baz&nbsp;:=&nbsp;'baz';&nbsp;&lt;br&gt;&lt;/p&gt;&lt;div&gt;&lt;br&nbsp;class=&quot;webkit-block-placeholder&quot;&gt;&lt;/div&gt;&lt;div&nbsp;id=&quot;qhide_867385&quot;&nbsp;class=&quot;qt&quot;&nbsp;style=&quot;display:&nbsp;block;&nbsp;&quot;&gt;}%%&nbsp;&lt;br&gt;&lt;br&gt;&lt;/div&gt;%%write&nbsp;init;&nbsp;&lt;br&gt;cs&nbsp;=&nbsp;(condition)&nbsp;?&nbsp;foo_bar&nbsp;:&nbsp;foo_baz;&nbsp;&lt;br&gt;%%write&nbsp;exec;&nbsp;&lt;br&gt;&lt;/font&gt;&lt;p&gt;&lt;font&nbsp;face=&quot;Courier,&nbsp;Monospaced&quot;&nbsp;class=&quot;fixed_width&quot;&nbsp;style=&quot;font-family:&nbsp;fixed-width,&nbsp;monospace;&nbsp;font-size:&nbsp;100%;&nbsp;&quot;&gt;Take&nbsp;care,&nbsp;&lt;br&gt;-Mitchell;&lt;/font&gt;&lt;/p&gt;&lt;/span&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;But&nbsp;since&nbsp;I'm&nbsp;doing&nbsp;several&nbsp;ways&nbsp;of&nbsp;attribute&nbsp;parsing,&nbsp;I&nbsp;had&nbsp;to&nbsp;start&nbsp;a&nbsp;new&nbsp;file&nbsp;anyway,&nbsp;but&nbsp;now&nbsp;they&nbsp;can&nbsp;all&nbsp;be&nbsp;in&nbsp;the&nbsp;same&nbsp;file&nbsp;and&nbsp;share&nbsp;the&nbsp;same&nbsp;basic&nbsp;structure.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;div&gt;&lt;div&gt;On&nbsp;Jun&nbsp;17,&nbsp;2008,&nbsp;at&nbsp;1:04&nbsp;AM,&nbsp;Erich&nbsp;Ocean&nbsp;wrote:&lt;/div&gt;&lt;br&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;Jason,&lt;br&gt;&lt;br&gt;Basically,&nbsp;you&nbsp;need&nbsp;one-token&nbsp;lookahead&nbsp;for&nbsp;that,&nbsp;which&nbsp;a&nbsp;straight&nbsp;&nbsp;&lt;br&gt;regex&nbsp;can't&nbsp;do.&nbsp;You&nbsp;might&nbsp;be&nbsp;able&nbsp;to&nbsp;use&nbsp;manual&nbsp;state&nbsp;transitions,&nbsp;but&nbsp;&nbsp;&lt;br&gt;it's&nbsp;easier&nbsp;to&nbsp;just&nbsp;separate&nbsp;the&nbsp;logic&nbsp;out&nbsp;into&nbsp;another&nbsp;function.&lt;br&gt;&lt;br&gt;For&nbsp;example,&nbsp;you&nbsp;could&nbsp;capture&nbsp;the&nbsp;inner&nbsp;contents&nbsp;of&nbsp;the&nbsp;emphasized&nbsp;&nbsp;&lt;br&gt;string&nbsp;into&nbsp;a&nbsp;buffer&nbsp;and&nbsp;then&nbsp;call&nbsp;into&nbsp;a&nbsp;C&nbsp;function&nbsp;where&nbsp;you&nbsp;can&nbsp;run&nbsp;&nbsp;&lt;br&gt;the&nbsp;three&nbsp;(Ragel)&nbsp;machines&nbsp;in&nbsp;sequence,&nbsp;in&nbsp;the&nbsp;priority&nbsp;order&nbsp;you've&nbsp;&nbsp;&lt;br&gt;set.&nbsp;Use&nbsp;the&nbsp;first&nbsp;one&nbsp;that&nbsp;works&nbsp;and&nbsp;return&nbsp;into&nbsp;your&nbsp;original&nbsp;&nbsp;&lt;br&gt;scanner&nbsp;machine/function.&nbsp;Order&nbsp;them&nbsp;longest-match-first.&nbsp;:-)&lt;br&gt;&lt;br&gt;Best,&nbsp;Erich&lt;br&gt;&lt;br&gt;On&nbsp;Jun&nbsp;16,&nbsp;2008,&nbsp;at&nbsp;8:15&nbsp;PM,&nbsp;Jason&nbsp;Garber&nbsp;wrote:&lt;br&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;In&nbsp;RedCloth,&nbsp;we&nbsp;have&nbsp;a&nbsp;problem&nbsp;where&nbsp;an&nbsp;_emphasized_&nbsp;bit&nbsp;of&nbsp;text&nbsp;can&nbsp;&nbsp;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;have&nbsp;_(myclass#myid)a&nbsp;CSS&nbsp;class&nbsp;and/or&nbsp;id_&nbsp;but&nbsp;shouldn't&nbsp;have&nbsp;a&nbsp;&nbsp;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;class&nbsp;or&nbsp;id&nbsp;if&nbsp;the&nbsp;whole&nbsp;emphasis&nbsp;is&nbsp;in&nbsp;parentheses&nbsp;_(practically&nbsp;&nbsp;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;speaking)_.&nbsp;&nbsp;Consider&nbsp;this&nbsp;example&nbsp;(simplified):&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;in:&nbsp;&quot;before&nbsp;_(in&nbsp;parens)_&nbsp;after&quot;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;expected:&nbsp;&quot;&lt;p&gt;before&nbsp;&lt;em&gt;(in&nbsp;parens)&lt;/em&gt;&nbsp;after&lt;/p&gt;&quot;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;but&nbsp;was:&nbsp;&quot;&lt;p&gt;before&nbsp;&lt;em&nbsp;class=\&quot;in&nbsp;parens\&quot;&gt;in&nbsp;parens)&lt;/em&gt;&nbsp;after&lt;/p&gt;&quot;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;It&nbsp;simultaneously&nbsp;pursues&nbsp;the&nbsp;possibilities&nbsp;that&nbsp;the&nbsp;parenthesized&nbsp;&nbsp;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;text&nbsp;is&nbsp;the&nbsp;class&nbsp;and&nbsp;that&nbsp;it's&nbsp;just&nbsp;regular&nbsp;parenthesized&nbsp;text&nbsp;&nbsp;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;inside&nbsp;the&nbsp;em.&nbsp;&nbsp;When&nbsp;the&nbsp;class&nbsp;possibility&nbsp;doesn't&nbsp;work&nbsp;out,&nbsp;the&nbsp;&nbsp;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;final&nbsp;state&nbsp;is&nbsp;the&nbsp;regular&nbsp;text&nbsp;part&nbsp;but&nbsp;the&nbsp;class&nbsp;has&nbsp;already&nbsp;been&nbsp;&nbsp;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;captured.&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;C&nbsp;=&nbsp;&quot;(&quot;&nbsp;(&nbsp;[^)#]+&nbsp;&gt;A&nbsp;%{&nbsp;STORE(class)&nbsp;}&nbsp;)?&nbsp;(&quot;#&quot;&nbsp;[^)]+&nbsp;&gt;A&nbsp;%&nbsp;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;{STORE(id)}&nbsp;)?&nbsp;&quot;)&quot;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;mtext&nbsp;=&nbsp;(&nbsp;chars&nbsp;(mspace&nbsp;chars)*&nbsp;)&nbsp;;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;em&nbsp;=&nbsp;&quot;_&quot;&nbsp;&gt;X&nbsp;C?&nbsp;mtext&nbsp;&gt;A&nbsp;%T&nbsp;:&gt;&nbsp;&quot;_&quot;&nbsp;;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;#&nbsp;The&nbsp;&gt;X&nbsp;resets&nbsp;the&nbsp;register&nbsp;from&nbsp;the&nbsp;last&nbsp;match,&nbsp;&gt;A&nbsp;registers&nbsp;the&nbsp;&nbsp;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;beginning&nbsp;of&nbsp;a&nbsp;string&nbsp;and&nbsp;the&nbsp;STORE&nbsp;saves&nbsp;it&nbsp;away.&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;I&nbsp;tried&nbsp;having&nbsp;the&nbsp;class&nbsp;info&nbsp;get&nbsp;written&nbsp;to&nbsp;a&nbsp;buffer&nbsp;that&nbsp;was&nbsp;then&nbsp;&nbsp;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;captured&nbsp;with&nbsp;a&nbsp;leaving&nbsp;action,&nbsp;which&nbsp;works&nbsp;for&nbsp;the&nbsp;class&nbsp;part,&nbsp;but&nbsp;&nbsp;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;I&nbsp;again&nbsp;run&nbsp;into&nbsp;the&nbsp;same&nbsp;problem&nbsp;with&nbsp;capturing&nbsp;the&nbsp;text&nbsp;because&nbsp;&nbsp;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;the&nbsp;right&nbsp;side&nbsp;of&nbsp;the&nbsp;union&nbsp;matches&nbsp;also,&nbsp;so&nbsp;it&nbsp;captures&nbsp;too&nbsp;much&nbsp;&nbsp;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;text.&nbsp;&nbsp;Whichever&nbsp;side&nbsp;of&nbsp;the&nbsp;vertical&nbsp;pipe&nbsp;writes&nbsp;last,&nbsp;wins.&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;C&nbsp;=&nbsp;&quot;(&quot;&nbsp;(&nbsp;[^)#]+&nbsp;&gt;A&nbsp;%{&nbsp;STORE(class_buf)&nbsp;}&nbsp;)?&nbsp;(&quot;#&quot;&nbsp;[^)]+&nbsp;&gt;A&nbsp;%&nbsp;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;{STORE(id_buf)}&nbsp;)?&nbsp;&quot;)&quot;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;C_mtext&nbsp;=&nbsp;(C&nbsp;%{&nbsp;STORE_ATTRIBUTES();&nbsp;}&nbsp;mtext&nbsp;&gt;A&nbsp;%{STORE(text)}&nbsp;|&nbsp;&nbsp;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;mtext&nbsp;&gt;B&nbsp;%{&nbsp;STORE_B(text);&nbsp;});&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;#&nbsp;SET_ATTRIBUTES&nbsp;copies&nbsp;the&nbsp;attributes&nbsp;from&nbsp;their&nbsp;buffers&nbsp;and&nbsp;stores&nbsp;&nbsp;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;them&nbsp;where&nbsp;they&nbsp;belong.&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;results&nbsp;in...&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;expected:&nbsp;&quot;&lt;p&gt;&lt;span&nbsp;class=\&quot;myclass\&quot;&gt;SPAN&lt;/span&gt;&lt;/p&gt;&quot;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;but&nbsp;was:&nbsp;&quot;&lt;p&gt;&lt;span&nbsp;class=\&quot;myclass\&quot;&gt;(myclass)SPAN&lt;/span&gt;&lt;/p&gt;&quot;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Really&nbsp;what&nbsp;I&nbsp;want&nbsp;is&nbsp;for&nbsp;it&nbsp;to&nbsp;try&nbsp;the&nbsp;first&nbsp;pattern&nbsp;(with&nbsp;the&nbsp;C)&nbsp;&nbsp;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;and,&nbsp;if&nbsp;that&nbsp;fails,&nbsp;try&nbsp;the&nbsp;second&nbsp;(the&nbsp;plain&nbsp;ol'&nbsp;mtext).&nbsp;&nbsp;Sounds&nbsp;&nbsp;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;like&nbsp;a&nbsp;scanner&nbsp;to&nbsp;me.&nbsp;&nbsp;Problem&nbsp;is,&nbsp;I'm&nbsp;already&nbsp;inside&nbsp;a&nbsp;scanner,&nbsp;so&nbsp;&nbsp;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;it&nbsp;won't&nbsp;let&nbsp;me&nbsp;call&nbsp;a&nbsp;scanner&nbsp;from&nbsp;within&nbsp;a&nbsp;pattern.&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Got&nbsp;any&nbsp;ideas?&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;Jason&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/blockquote&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
