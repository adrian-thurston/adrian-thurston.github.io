<tt>
Hello&nbsp;there,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&#39;m&nbsp;using&nbsp;ragel&nbsp;to&nbsp;read&nbsp;peripherals&nbsp;input&nbsp;using&nbsp;a&nbsp;microcontroller.&nbsp;I&nbsp;need&nbsp;to&nbsp;have&nbsp;two&nbsp;machines:&nbsp;one&nbsp;for&nbsp;parsing&nbsp;commands&nbsp;and&nbsp;the&nbsp;other&nbsp;for&nbsp;storing&nbsp;data.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Let&#39;s&nbsp;suppose&nbsp;that&nbsp;my&nbsp;setup&nbsp;is&nbsp;like&nbsp;this:&nbsp;when&nbsp;the&nbsp;device&nbsp;is&nbsp;turned&nbsp;on,&nbsp;I&nbsp;know&nbsp;that&nbsp;I&#39;m&nbsp;in&nbsp;command&nbsp;mode&nbsp;and&nbsp;I&nbsp;will&nbsp;parse&nbsp;some&nbsp;ASCII&nbsp;words&nbsp;to&nbsp;acknowledge&nbsp;the&nbsp;peripheral&#39;s&nbsp;state.&nbsp;However,&nbsp;if&nbsp;I&nbsp;get&nbsp;the&nbsp;word&nbsp;*OPEN*,&nbsp;every&nbsp;character&nbsp;that&nbsp;I&nbsp;received&nbsp;after&nbsp;the&nbsp;second&nbsp;*&nbsp;will&nbsp;be&nbsp;stored&nbsp;as&nbsp;data.&nbsp;While&nbsp;in&nbsp;this&nbsp;data&nbsp;mode&nbsp;(where&nbsp;I&nbsp;store&nbsp;every&nbsp;character),&nbsp;if&nbsp;I&nbsp;receive&nbsp;the&nbsp;*CLOS*&nbsp;string,&nbsp;I&nbsp;should&nbsp;NOT&nbsp;store&nbsp;*CLOS*&nbsp;in&nbsp;my&nbsp;data&nbsp;buffer&nbsp;and&nbsp;leave&nbsp;the&nbsp;data&nbsp;mode&nbsp;(switch&nbsp;to&nbsp;the&nbsp;other&nbsp;machine).&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&#39;ve&nbsp;accomplished&nbsp;almost&nbsp;everything&nbsp;that&nbsp;I&nbsp;need&nbsp;with&nbsp;this&nbsp;machines,&nbsp;except&nbsp;the&nbsp;part&nbsp;of&nbsp;not&nbsp;storing&nbsp;the&nbsp;*CLOS*&nbsp;object.&nbsp;My&nbsp;first&nbsp;solution&nbsp;was&nbsp;to&nbsp;just&nbsp;delete&nbsp;it&nbsp;after&nbsp;a&nbsp;match&nbsp;of&nbsp;*CLOS*,&nbsp;but&nbsp;this&nbsp;causes&nbsp;problems&nbsp;with&nbsp;parallel&nbsp;execution&nbsp;in&nbsp;my&nbsp;environment&nbsp;because&nbsp;in&nbsp;a&nbsp;give&nbsp;moment&nbsp;I&nbsp;might&nbsp;have&nbsp;data&nbsp;in&nbsp;my&nbsp;buffer&nbsp;that&nbsp;is&nbsp;not&nbsp;really&nbsp;data.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;So&nbsp;I&nbsp;created&nbsp;some&nbsp;locks&nbsp;that&nbsp;will&nbsp;prevent&nbsp;the&nbsp;data&nbsp;machine&nbsp;from&nbsp;storing&nbsp;the&nbsp;caracters&nbsp;when&nbsp;I&nbsp;begin&nbsp;to&nbsp;match&nbsp;what&nbsp;is&nbsp;a&nbsp;candidate&nbsp;of&nbsp;*CLOS*&nbsp;(example:&nbsp;*CL).&nbsp;This&nbsp;works&nbsp;fine&nbsp;if&nbsp;the&nbsp;candidate&nbsp;proves&nbsp;to&nbsp;be,&nbsp;indeed,&nbsp;a&nbsp;*CLOS*&nbsp;string,&nbsp;but&nbsp;I&nbsp;don&#39;t&nbsp;know&nbsp;how&nbsp;to&nbsp;associate&nbsp;an&nbsp;action&nbsp;to&nbsp;the&nbsp;event&nbsp;of&nbsp;*CL&nbsp;not&nbsp;ending&nbsp;up&nbsp;in&nbsp;a&nbsp;*CLOS*&nbsp;(example:&nbsp;*CLabc).&nbsp;At&nbsp;this&nbsp;point,&nbsp;I&nbsp;want&nbsp;to&nbsp;store&nbsp;*CLabc&nbsp;in&nbsp;my&nbsp;buffer&nbsp;and&nbsp;continue&nbsp;storing&nbsp;characters.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&#39;m&nbsp;kind&nbsp;of&nbsp;new&nbsp;to&nbsp;Ragel&nbsp;and&nbsp;I&#39;m&nbsp;enjoying&nbsp;it&nbsp;very&nbsp;much.&nbsp;However,&nbsp;I&nbsp;don&#39;t&nbsp;know&nbsp;if&nbsp;I&#39;m&nbsp;doing&nbsp;things&nbsp;in&nbsp;an&nbsp;awkward&nbsp;or&nbsp;if&nbsp;I&nbsp;am&nbsp;indeed&nbsp;in&nbsp;the&nbsp;right&nbsp;track.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;How&nbsp;do&nbsp;I&nbsp;achieve&nbsp;what&nbsp;I&nbsp;want&nbsp;to&nbsp;do?&nbsp;Is&nbsp;there&nbsp;a&nbsp;better&nbsp;way?&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cheers,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Ivan&lt;/div&gt;<br>

</tt>
