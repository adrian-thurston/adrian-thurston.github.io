<tt>
&lt;!DOCTYPE&nbsp;html&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;XHTML&nbsp;1.0&nbsp;Transitional//EN&quot;&gt;<br>
&lt;html&gt;&lt;body&nbsp;style='font-size:&nbsp;14pt;&nbsp;font-family:&nbsp;Verdana,Geneva,sans-serif'&gt;<br>
&lt;p&gt;Hi&nbsp;Ming,&lt;/p&gt;<br>
&lt;p&gt;Ragel&nbsp;has&nbsp;no&nbsp;support&nbsp;for&nbsp;this&nbsp;built&nbsp;in.&nbsp;I&nbsp;use&nbsp;a&nbsp;class&nbsp;for&nbsp;this&nbsp;that&nbsp;tracks&nbsp;the&nbsp;start&nbsp;of&nbsp;the&nbsp;interesting&nbsp;input&nbsp;and&nbsp;flushes&nbsp;it&nbsp;out&nbsp;when&nbsp;necessary.&nbsp;The&nbsp;start&nbsp;and&nbsp;finish&nbsp;functions&nbsp;are&nbsp;called&nbsp;from&nbsp;ragel&nbsp;actions.&nbsp;The&nbsp;preExec&nbsp;and&nbsp;postExec&nbsp;functions&nbsp;are&nbsp;called&nbsp;before&nbsp;and&nbsp;after&nbsp;the&nbsp;ragel&nbsp;write&nbsp;exec.&nbsp;See&nbsp;attached&nbsp;example.&lt;/p&gt;<br>
&lt;p&gt;In&nbsp;my&nbsp;uses&nbsp;I&nbsp;expand&nbsp;it&nbsp;to&nbsp;include&nbsp;start&nbsp;and&nbsp;finish&nbsp;functions&nbsp;on&nbsp;the&nbsp;expensive&nbsp;thing&nbsp;(also&nbsp;a&nbsp;stream&nbsp;processor),&nbsp;and&nbsp;I&nbsp;can&nbsp;also&nbsp;pause&nbsp;it&nbsp;to&nbsp;skip&nbsp;over&nbsp;some&nbsp;data&nbsp;that&nbsp;shouldn't&nbsp;go&nbsp;to&nbsp;expensive&nbsp;thing.&lt;/p&gt;<br>
&lt;p&gt;I've&nbsp;often&nbsp;thought&nbsp;about&nbsp;building&nbsp;this&nbsp;support&nbsp;into&nbsp;ragel,&nbsp;but&nbsp;once&nbsp;you've&nbsp;got&nbsp;the&nbsp;class&nbsp;made&nbsp;it's&nbsp;super&nbsp;easy&nbsp;to&nbsp;reuse&nbsp;it&nbsp;in&nbsp;many&nbsp;different&nbsp;cases.&lt;/p&gt;<br>
&lt;p&gt;Regards,&lt;/p&gt;<br>
&lt;p&gt;&nbsp;Adrian&lt;/p&gt;<br>
&lt;p&gt;On&nbsp;2018-10-31&nbsp;16:48,&nbsp;Ming&nbsp;Fu&nbsp;wrote:&lt;/p&gt;<br>
&lt;blockquote&nbsp;type=&quot;cite&quot;&nbsp;style=&quot;padding-left:5px;&nbsp;border-left:#1010ff&nbsp;2px&nbsp;solid;&nbsp;margin-left:5px&quot;&gt;&lt;!--&nbsp;html&nbsp;ignored&nbsp;--&gt;&nbsp;&lt;!--&nbsp;head&nbsp;ignored&nbsp;--&gt;&lt;!--&nbsp;meta&nbsp;ignored&nbsp;--&gt;&nbsp;&lt;!--&nbsp;meta&nbsp;ignored&nbsp;--&gt;&lt;!--&nbsp;node&nbsp;type&nbsp;8&nbsp;--&gt;&lt;!--&nbsp;node&nbsp;type&nbsp;8&nbsp;--&gt;<br>
&lt;div&nbsp;class=&quot;WordSection1&quot;&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;Hi,&lt;!--&nbsp;o&nbsp;ignored&nbsp;--&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;!--&nbsp;o&nbsp;ignored&nbsp;--&gt;&nbsp;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;I&nbsp;have&nbsp;the&nbsp;following&nbsp;ragel&nbsp;rule:&lt;!--&nbsp;o&nbsp;ignored&nbsp;--&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;!--&nbsp;o&nbsp;ignored&nbsp;--&gt;&nbsp;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;any*&nbsp;$(&lt;!--&nbsp;o&nbsp;ignored&nbsp;--&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Some_expensive_call(*p)&lt;!--&nbsp;o&nbsp;ignored&nbsp;--&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;}&lt;!--&nbsp;o&nbsp;ignored&nbsp;--&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;!--&nbsp;o&nbsp;ignored&nbsp;--&gt;&nbsp;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;However,&nbsp;I&nbsp;do&nbsp;not&nbsp;necessary&nbsp;have&nbsp;to&nbsp;make&nbsp;the&nbsp;some_expensive_call&nbsp;per&nbsp;input&nbsp;char,&nbsp;I&nbsp;can&nbsp;call&nbsp;some_less_expensive_call(*p,&nbsp;len)&nbsp;to&nbsp;be&nbsp;more&nbsp;efficient.&lt;!--&nbsp;o&nbsp;ignored&nbsp;--&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;How&nbsp;do&nbsp;I&nbsp;figure&nbsp;out&nbsp;the&nbsp;len&nbsp;and&nbsp;adjust&nbsp;pe.&nbsp;Consider&nbsp;the&nbsp;input&nbsp;may&nbsp;not&nbsp;be&nbsp;in&nbsp;contiguous&nbsp;memory&nbsp;block.&lt;!--&nbsp;o&nbsp;ignored&nbsp;--&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;&lt;!--&nbsp;o&nbsp;ignored&nbsp;--&gt;&nbsp;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;Thanks,&lt;!--&nbsp;o&nbsp;ignored&nbsp;--&gt;&lt;/p&gt;<br>
&lt;p&nbsp;class=&quot;MsoNormal&quot;&gt;Ming&lt;!--&nbsp;o&nbsp;ignored&nbsp;--&gt;&lt;/p&gt;<br>
&lt;/div&gt;<br>
&lt;!--&nbsp;html&nbsp;ignored&nbsp;--&gt;&lt;br&nbsp;/&gt;<br>
&lt;pre&gt;_______________________________________________<br>
ragel-users&nbsp;mailing&nbsp;list<br>
&lt;a&nbsp;href=&quot;mailto:ragel-users@colm.net&quot;&gt;ragel-users@colm.net&lt;/a&gt;<br>
&lt;a&nbsp;href=&quot;http://www.colm.net/cgi-bin/mailman/listinfo/ragel-users&quot;&gt;http://www.colm.net/cgi-bin/mailman/listinfo/ragel-users&lt;/a&gt;<br>
&lt;/pre&gt;<br>
&lt;/blockquote&gt;<br>
&lt;/body&gt;&lt;/html&gt;<br>

</tt>
