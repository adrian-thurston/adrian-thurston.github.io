<tt>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;I&nbsp;have&nbsp;a&nbsp;serial&nbsp;protocol&nbsp;where&nbsp;I&nbsp;call&nbsp;Execute()&nbsp;as&nbsp;each&nbsp;character&lt;br&gt;comes&nbsp;in.&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;At&nbsp;the&nbsp;end&nbsp;of&nbsp;my&nbsp;data&nbsp;transfer&nbsp;I&nbsp;know&nbsp;that&nbsp;I&nbsp;am&nbsp;done&nbsp;from&nbsp;within&lt;br&gt;an&nbsp;action.&nbsp;&nbsp;With&nbsp;the&nbsp;knowledge&nbsp;that&nbsp;the&nbsp;transfer&nbsp;is&nbsp;complete&nbsp;how&lt;br&gt;do&nbsp;I&nbsp;get&nbsp;Execute()&nbsp;to&nbsp;return&nbsp;that&nbsp;the&nbsp;machine&nbsp;matched?&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;There&nbsp;will&nbsp;be&nbsp;no&nbsp;more&nbsp;characters&nbsp;coming&nbsp;in&nbsp;to&nbsp;drive&nbsp;the&nbsp;machine.&lt;/div&gt;<br>
&lt;p&gt;My&nbsp;attempts&nbsp;at&nbsp;using&nbsp;fbreak,&nbsp;which&nbsp;does&nbsp;nothing&nbsp;by&nbsp;staying&nbsp;in&nbsp;the&lt;br&gt;current&nbsp;state&nbsp;(as&nbsp;it&nbsp;should&nbsp;I&nbsp;believe),&nbsp;or&nbsp;&#39;&#39;&nbsp;-&gt;&nbsp;final&nbsp;which&lt;br&gt;breaks&nbsp;the&nbsp;transfer&nbsp;protocol,&nbsp;have&nbsp;not&nbsp;worked.&lt;/p&gt;<br>
&lt;div&gt;How&nbsp;do&nbsp;I&nbsp;be&nbsp;&quot;done&quot;&nbsp;from&nbsp;within&nbsp;a&nbsp;State&nbsp;Chart&nbsp;action?&lt;/div&gt;<br>
&lt;div&gt;&nbsp;&lt;/div&gt;<br>
&lt;div&gt;int&nbsp;StateChart::Execute(&nbsp;const&nbsp;uint8_t&nbsp;*data&nbsp;)&lt;br&gt;{&lt;br&gt;&nbsp;&nbsp;const&nbsp;char&nbsp;*p&nbsp;&nbsp;=&nbsp;(const&nbsp;char&nbsp;*)&nbsp;data;&lt;br&gt;&nbsp;&nbsp;const&nbsp;char&nbsp;*pe&nbsp;=&nbsp;p+1;&lt;br&gt;&nbsp;&nbsp;const&nbsp;char&nbsp;*eof&nbsp;=&nbsp;0;&nbsp;//&nbsp;This&nbsp;fixes&nbsp;compiler&nbsp;bug&nbsp;for&nbsp;Ragel&nbsp;6.1&nbsp;with&nbsp;DMC&nbsp;8.5.x&lt;/div&gt;<br>
&lt;p&gt;&nbsp;wxLogVerbose(&nbsp;_(&quot;Execute[%02X]&quot;),&nbsp;*data&nbsp;);&lt;/p&gt;<br>
&lt;p&gt;&nbsp;&nbsp;if(&nbsp;(cs&nbsp;==&nbsp;StateChart_error)&nbsp;||&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(cs&nbsp;==&nbsp;StateChart_first_final)&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;)&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wxLogVerbose(&nbsp;_(&quot;-1&nbsp;Error&nbsp;B4&nbsp;write&nbsp;cs&nbsp;=&nbsp;[State{%d}]&quot;)&nbsp;,&nbsp;cs&nbsp;);&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;-1;&nbsp;/*&nbsp;Error&nbsp;*/&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;/p&gt;<br>
<br>
&lt;p&gt;&nbsp;&nbsp;%%&nbsp;write&nbsp;exec;&lt;/p&gt;<br>
&lt;p&gt;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;cs&nbsp;==&nbsp;StateChart_error&nbsp;)&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wxLogVerbose(&nbsp;_(&quot;-1&nbsp;Error&nbsp;after&nbsp;write&nbsp;cs&nbsp;=&nbsp;[State{%d}]&quot;)&nbsp;,&nbsp;cs&nbsp;);&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;-1;&nbsp;/*&nbsp;Error&nbsp;*/&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;/p&gt;<br>
&lt;p&gt;&nbsp;&nbsp;&nbsp;&nbsp;if(&nbsp;cs&nbsp;&gt;=&nbsp;StateChart_first_final&nbsp;)&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wxLogVerbose(&nbsp;_(&quot;!*Matched*!&nbsp;cs&nbsp;=&nbsp;[State{%d}]&quot;)&nbsp;,&nbsp;cs&nbsp;);&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;1;&nbsp;/*&nbsp;Matched&nbsp;*/&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;/p&gt;<br>
&lt;p&gt;&nbsp;&nbsp;&nbsp;&nbsp;wxLogVerbose(&nbsp;_(&quot;No&nbsp;Matched&nbsp;cs&nbsp;=&nbsp;[State{%d}]&quot;)&nbsp;,&nbsp;cs&nbsp;);&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;&nbsp;/*&nbsp;No&nbsp;Match&nbsp;*/&lt;br&gt;}&lt;br&gt;&lt;/p&gt;<br>

</tt>
