<tt>
Hi&nbsp;List,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;started&nbsp;this&nbsp;week&nbsp;a&nbsp;small&nbsp;project&nbsp;to&nbsp;learn&nbsp;how&nbsp;to&nbsp;use&nbsp;&quot;Ragel&quot;&nbsp;on&nbsp;something&nbsp;useful.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;idea&nbsp;is&nbsp;to&nbsp;parse&nbsp;JSON&nbsp;(&lt;a&nbsp;href=&quot;http://www.json.org&quot;&gt;www.json.org&lt;/a&gt;) data-interchange&nbsp;format. &lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;Times;&nbsp;font-size:&nbsp;medium;&nbsp;&quot;&gt;&lt;span&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;font-family:&nbsp;arial;&nbsp;font-size:&nbsp;small;&nbsp;&quot;&gt;I&#39;ve&nbsp;posted&nbsp;my&nbsp;solution&nbsp;below&nbsp;with&nbsp;the&nbsp;corresponding&nbsp;graphviz&nbsp;FSM. &lt;/span&gt;&lt;/span&gt;&lt;/div&gt;<br>
&lt;div&gt;Lexing&nbsp;is&nbsp;OK&nbsp;and&nbsp;I&nbsp;can&nbsp;parse&nbsp;eveything&nbsp;correctly&nbsp;(except&nbsp;JSON&nbsp;comments&nbsp;...&nbsp;I&nbsp;don&#39;t&nbsp;care&nbsp;about&nbsp;them).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;My&nbsp;question&nbsp;is&nbsp;for&nbsp;Ragel&nbsp;GURUS&nbsp;:&nbsp;is&nbsp;there&nbsp;a&nbsp;better&nbsp;way&nbsp;to&nbsp;do&nbsp;it&nbsp;?&nbsp;Could&nbsp;I&nbsp;parse&nbsp;JSON&nbsp;faster&nbsp;than&nbsp;that&nbsp;?&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Any&nbsp;hint,&nbsp;tricks&nbsp;to&nbsp;improve&nbsp;speed&nbsp;will&nbsp;be&nbsp;very&nbsp;welcome&nbsp;;)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;N.B:&nbsp;the&nbsp;beauty&nbsp;of&nbsp;JSON&nbsp;is&nbsp;that&nbsp;you&nbsp;need&nbsp;exactly&nbsp;one&nbsp;character&nbsp;lookahead&nbsp;to&nbsp;parse&nbsp;everything.&lt;/div&gt;&lt;div&gt;But&nbsp;I&nbsp;don&#39;t&nbsp;know&nbsp;if&nbsp;my&nbsp;Ragel&nbsp;code&nbsp;is&nbsp;doing&nbsp;a&nbsp;good&nbsp;job&nbsp;on&nbsp;that.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks&nbsp;in&nbsp;advance&lt;/div&gt;&lt;div&gt;Ferret&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;======================================================&lt;/div&gt;&lt;div&gt;&lt;div&gt;  &nbsp;myspace&nbsp; &nbsp; &nbsp; &nbsp; =&nbsp;[&nbsp;\n\r\t];&lt;/div&gt;&lt;div&gt;  &nbsp; endspace&nbsp; &nbsp; &nbsp; &nbsp;=&nbsp;any&nbsp;-&nbsp;myspace;&lt;/div&gt;<br>
&lt;div&gt;  &nbsp; end&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&nbsp;[\]},\[{}\&quot;:tfn]&nbsp;|&nbsp;myspace;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;  &nbsp; exp&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&nbsp;([eE]&nbsp;&gt;number_float&nbsp;.&nbsp;[+\-]?&nbsp;.&nbsp;digit+)&nbsp;$append&nbsp;.&nbsp;(end&nbsp;&gt;number_break)?;&lt;/div&gt;&lt;div&gt;  &nbsp; float&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&nbsp;(&#39;.&#39;&nbsp;&gt;number_float&nbsp; .&nbsp;digit+)&nbsp;$append&nbsp;.&nbsp;(exp&nbsp;|&nbsp;end&nbsp;&gt;number_break)?;&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;  &nbsp; number&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&nbsp;((&#39;-&#39;&nbsp;&gt;number_signed)?&nbsp;$append)&nbsp;.&nbsp;((&#39;0&#39;&nbsp;|&nbsp;([1-9]&nbsp;.&nbsp;digit*))&nbsp;&gt;number_unsigned&nbsp;$append&nbsp;.&nbsp;(float&nbsp;|&nbsp;exp&nbsp;|&nbsp;end&nbsp;&gt;number_break)?);&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;  &nbsp; unicode&nbsp; &nbsp; &nbsp; &nbsp; =&nbsp;((0&nbsp;..&nbsp;0xd777)&nbsp;|&nbsp;(0xe000&nbsp;..&nbsp;0x10ffff));&lt;/div&gt;<br>
&lt;div&gt;  &nbsp; string&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&nbsp;&#39;&quot;&#39;&nbsp;.&nbsp;(&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;start:&nbsp;(&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(unicode&nbsp;-&nbsp;[\&quot;\\])&nbsp;$append&nbsp;-&gt;&nbsp;start&nbsp;|&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&#39;&quot;&#39;&nbsp;(any&nbsp;&gt;string_break)?&nbsp;-&gt;&nbsp;final&nbsp;|&lt;/div&gt;<br>
&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&#39;\\&#39;&nbsp;&gt;append&nbsp;-&gt;&nbsp;unquote&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;),&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;unquote:&nbsp;([\&quot;\\/bfnrt]&nbsp;&gt;append&nbsp;-&gt;&nbsp;start&nbsp;|&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&#39;u&#39;&nbsp;$append&nbsp;.&nbsp;(xdigit{4}&nbsp;$append)&nbsp;-&gt;&nbsp;start&lt;/div&gt;<br>
&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;),&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;final:&nbsp;empty&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;);&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp;blank&nbsp; &nbsp; &nbsp; &nbsp; =&nbsp;myspace+&nbsp;(endspace&nbsp;&gt;break)?;&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp;true&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=&nbsp;&#39;true&#39;&nbsp; &nbsp;(any&nbsp;&gt;true_break)?;&lt;/div&gt;<br>
&lt;div&gt;  &nbsp; &nbsp;false&nbsp; &nbsp; &nbsp; &nbsp; =&nbsp;&#39;false&#39;&nbsp; (any&nbsp;&gt;false_break)?;&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp;nil&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&nbsp;&#39;null&#39;&nbsp; &nbsp;(any&nbsp;&gt;null_break)?;&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp;object_start&nbsp;=&nbsp;&#39;{&#39;&nbsp; &nbsp; &nbsp; (any&nbsp;&gt;left_brace_break)?;&lt;/div&gt;&lt;div&gt;<br>
  &nbsp; &nbsp;object_end&nbsp; &nbsp;=&nbsp;&#39;}&#39;&nbsp; &nbsp; &nbsp; (any&nbsp;&gt;right_brace_break)?;&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp;array_start&nbsp; =&nbsp;&#39;[&#39;&nbsp; &nbsp; &nbsp; (any&nbsp;&gt;left_bracket_break)?;&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp;array_end&nbsp; &nbsp; =&nbsp;&#39;]&#39;&nbsp; &nbsp; &nbsp; (any&nbsp;&gt;right_bracket_break)?;&lt;/div&gt;<br>
&lt;div&gt;  &nbsp; &nbsp;comma&nbsp; &nbsp; &nbsp; &nbsp; =&nbsp;&#39;,&#39;&nbsp; &nbsp; &nbsp; (any&nbsp;&gt;comma_break)?;&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp;colon&nbsp; &nbsp; &nbsp; &nbsp; =&nbsp;&#39;:&#39;&nbsp; &nbsp; &nbsp; (any&nbsp;&gt;colon_break&nbsp;)?;&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp;eoi&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&nbsp;0&nbsp;&gt;eoi_break;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp;main&nbsp;:=&nbsp;(&lt;/div&gt;<br>
&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; object_start&nbsp;| &lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; object_end&nbsp; &nbsp;|&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; array_start&nbsp; |&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; array_end&nbsp; &nbsp; |&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; colon&nbsp; &nbsp; &nbsp; &nbsp; |&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; comma&nbsp; &nbsp; &nbsp; &nbsp; |&lt;/div&gt;<br>
&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; string&nbsp; &nbsp; &nbsp; &nbsp;| &lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; number&nbsp; &nbsp; &nbsp; &nbsp;| &lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; true&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| &lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; false&nbsp; &nbsp; &nbsp; &nbsp; | &lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; nil&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | &lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; blank&nbsp; &nbsp; &nbsp; &nbsp; |&lt;/div&gt;<br>
&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; eoi&lt;/div&gt;&lt;div&gt;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )&nbsp;&gt;clear;&lt;/div&gt;&lt;div&gt;}%%&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;======================================================&lt;/div&gt;&lt;/div&gt;<br>

</tt>
