<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> problems with java generation in ragel 6.x trunk
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:ragel-users%40colm.net?Subject=Re%3A%20problems%20with%20java%20generation%20in%20ragel%206.x%20trunk&In-Reply-To=%3Cp06240804c40ce699bdb8%40%5B192.168.1.114%5D%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="002282.html">
   <LINK REL="Next"  HREF="002288.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>problems with java generation in ragel 6.x trunk</H1>
    <B>Stephen Bannasch</B> 
    <A HREF="mailto:ragel-users%40colm.net?Subject=Re%3A%20problems%20with%20java%20generation%20in%20ragel%206.x%20trunk&In-Reply-To=%3Cp06240804c40ce699bdb8%40%5B192.168.1.114%5D%3E"
       TITLE="problems with java generation in ragel 6.x trunk">stephen.banna... at deanbrook.org
       </A><BR>
    <I>Mon Mar 24 05:23:51 UTC 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="002282.html">[ragel-users] code generation styles, C and Java??
</A></li>
        <LI>Next message: <A HREF="002288.html">[ragel-users] problems with java generation in ragel 6.x trunk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#524">[ date ]</a>
              <a href="thread.html#524">[ thread ]</a>
              <a href="subject.html#524">[ subject ]</a>
              <a href="author.html#524">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm working on getting Hpricot to work using trunk ragel. Right now 
I'm getting lots of undefined Symbols.

Any ideas on where to start fixing this would be great.

It does work with ragel 5.25.

Here's how the java file is being produced:

ragel -J -o ext/hpricot_scan/HpricotScanService.java 
ext/hpricot_scan/hpricot_scan.java.rl

Here's the Java compiler invocation:

javac -source 1.4 -target 1.4 -cp 
.:/Users/stephen/dev/junit4.1::/Users/stephen/dev/jruby_trunk/jruby/lib/bsf.jar:/Users/stephen/dev/jruby_trunk/jruby/lib/jruby-complete.jar:/Users/stephen/dev/jruby_trunk/jruby/lib/jruby.jar:/Users/stephen/dev/jruby_trunk/jruby/lib/lucene-core-2.2.0.jar 
HpricotScanService.java

----------------------------------------------------------

The errors start with a series of these:

HpricotScanService.java:821: cannot find symbol
symbol  : variable ts
location: class HpricotScanService
	ts = -1;
         ^
HpricotScanService.java:822: cannot find symbol
symbol  : variable te
location: class HpricotScanService
	te = -1;
         ^

Here's the Java source code:

// line 819 &quot;ext/hpricot_scan/HpricotScanService.java&quot;
	{
	cs = hpricot_scan_start;
	ts = -1;
	te = -1;
	act = 0;
	}

----------------------------------------------------------

Here are some more errors:

HpricotScanService.java:1086: cannot find symbol
symbol  : variable te
location: class HpricotScanService
	{{p = ((te))-1;}{ TEXT_PASS(); }}
                 ^
HpricotScanService.java:1086: illegal start of type
	{{p = ((te))-1;}{ TEXT_PASS(); }}
                ^
HpricotScanService.java:1086: illegal start of type
	{{p = ((te))-1;}{ TEXT_PASS(); }}


And here's the code around line 1086:

	case 30:
// line 56 &quot;ext/hpricot_scan/hpricot_scan.java.rl&quot;
	{{p = ((te))-1;}{ TEXT_PASS(); }}
	break;


----------------------------------------------------------


HpricotScanService.java:1210: cannot find symbol
symbol  : variable eof
location: class HpricotScanService

And here's the code:

case 4:
	if ( p == eof )
	{
	if ( _hpricot_scan_eof_trans[cs] &gt; 0 ) {
		_trans = _hpricot_scan_eof_trans[cs] - 1;
		_goto_targ = 3;
		continue _goto;
	}
	}
	if ( p == eof )

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002282.html">[ragel-users] code generation styles, C and Java??
</A></li>
	<LI>Next message: <A HREF="002288.html">[ragel-users] problems with java generation in ragel 6.x trunk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#524">[ date ]</a>
              <a href="thread.html#524">[ thread ]</a>
              <a href="subject.html#524">[ subject ]</a>
              <a href="author.html#524">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://www.colm.net/cgi-bin/mailman/listinfo/ragel-users">More information about the ragel-users
mailing list</a><br>
</body></html>
